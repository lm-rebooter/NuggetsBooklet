åœ¨å‰é¢å·²ç»æåˆ°ï¼Œä½ä»£ç å¹³å°ç”¨æˆ·é€šè¿‡å¯è§†åŒ–æ–¹å¼æ„å»ºåº”ç”¨ç¨‹åº **GUI** å¹¶é…ç½®å…¶å±æ€§å’ŒçŠ¶æ€ã€‚ç„¶è€Œåœ¨æ„å»ºå®Œæˆä¹‹åï¼Œå³ä½¿çœ‹åˆ°åº”ç”¨ç¨‹åºå¤–è§‚å’Œè¡Œä¸ºã€ç”¨æˆ·äº¤äº’ç­‰æ–¹é¢æ˜¯å¿…è¦çš„ã€‚é€šè¿‡ä½ä»£ç é¢„è§ˆï¼Œä½¿ç”¨è€…å¯ä»¥å¿«é€Ÿäº†è§£åº”ç”¨ç¨‹åºçš„å¤–è§‚å’Œè¡Œä¸ºï¼Œä»¥åŠç”¨æˆ·äº¤äº’çš„æ•ˆæœå’Œä½“éªŒã€‚

**æœ‰åŒå­¦ä¼šé—®ï¼Œç¼–è¾‘å™¨ä¸­çš„ç”»å¸ƒéš¾é“ä¸ç®—æ˜¯ä¸€ä¸ªé¢„è§ˆåŠŸèƒ½å—**ï¼Ÿ

è¿™é‡Œéœ€è¦å¼ºè°ƒï¼Œç”»å¸ƒæœ¬è´¨ä¸Šå¹¶ä¸ç®—æ˜¯ä¸€ä¸ªé¢„è§ˆç¯å¢ƒï¼Œåœ¨ç¼–è¾‘çŠ¶æ€ä¸‹ï¼Œç”»å¸ƒä¸­çš„ç»„ä»¶é™¤äº†æ˜¾ç¤ºç›¸å…³çš„ç¼–è¾‘çŠ¶æ€ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸€äº›å®šåˆ¶çš„æ˜¾ç¤ºæ•ˆæœï¼Œæ¯”å¦‚æ’æ§½ç»„ä»¶ä¼šæ˜¾ç¤ºå ä½ä¿¡æ¯æ¥å¼•å¯¼ç”¨æˆ·æ·»åŠ ç»„ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bd34b2e64c584fc4bb1f538f838ac55c~tplv-k3u1fbpfcp-zoom-1.image)

é¢„è§ˆç¯å¢ƒï¼Œæ—¨åœ¨å±•ç°é¡µé¢çœŸå®å‘ˆç°çŠ¶æ€ï¼Œæ˜¯ä½ä»£ç å¹³å°çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ©ç”¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ï¼Œå®Œæˆæ•´ä¸ªå¹³å°çš„æœ¬åœ°é¢„è§ˆæ¨¡å—ã€‚ç›¸ä¿¡å®Œæˆè¿™ä¸€ç« èŠ‚åï¼Œæ‚¨å¯¹ç¼–è¾‘å™¨çš„å·¥ä½œæµç¨‹å°†æœ‰æ›´åŠ æ·±å…¥çš„ç†è§£ã€‚

## å®ç°è¿‡ç¨‹

åœ¨å‰æœŸè®¾è®¡ç¯‡ä¸­æåˆ°è¿‡ï¼Œç¼–è¾‘å™¨çš„å†…å®¹éƒ½æ˜¯ä¾é  **Schema** æ¥æ¸²æŸ“çš„ã€‚é‚£ä¹ˆé¢„è§ˆé¡µé¢çš„å®ç°é€»è¾‘å°±æ˜¯åœ¨æ–°çš„é¡µé¢æ‰“å¼€ï¼Œå¹¶å°†å½“å‰çš„ **Schema** è¿›è¡ŒåŠ è½½æ¸²æŸ“ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸‹é¢æ˜¯ä¸¤ç§ä¸åŒçš„è´®è—æ–¹å¼æµç¨‹å›¾ï¼š

*   **æ–¹æ¡ˆä¸€**ï¼šé‡‡ç”¨åŸºäº **sessionStorage** çš„ **UID** å­˜å‚¨æ–¹å¼ï¼Œé¢„è§ˆæ—¶é‡æ–°ç”Ÿæˆã€‚å¤šä¸ªå‰¯æœ¬ä¹‹é—´å°†æ— å…³è”ï¼Œå‘ˆç°ç›¸å¯¹ç‹¬ç«‹çŠ¶æ€ï¼Œä»è€Œè¾¾åˆ°å¤šä¸ªå‰¯æœ¬å…±å­˜æ¯”å¯¹çš„ä½œç”¨ã€‚
*   **æ–¹æ¡ˆäºŒ**ï¼šé€šè¿‡åŸºäº **localStorage** çš„å­˜å‚¨æ–¹å¼ï¼Œç¼–è¾‘å™¨ä¸é¢„è§ˆé¡µé¢å°†å®ç°å¿«é€ŸåŒæ­¥ï¼Œå…±åŒä½¿ç”¨ä¸€ä¸ªæœ¬åœ°å­˜å‚¨ï¼Œå‘ˆç°å®æ—¶é¢„è§ˆæ•ˆæœï¼ŒåŒæ—¶è¿˜èƒ½æ”¯æŒæŒä¹…åŒ–çš„æ•°æ®ç¼“å­˜ã€‚æ­¤æ–¹æ¡ˆå°†è¿›ä¸€æ­¥æå‡ç”¨æˆ·çš„å·¥ä½œæ•ˆç‡ï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´å¤šçš„ä¾¿åˆ©ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30c46090b1194d41a1ab7fad6ea5651b~tplv-k3u1fbpfcp-zoom-1.image)

ä»¥ä¸Šå‘ˆç°äº†ä¸¤ç§åŸºæœ¬çš„æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼Œå½“ç„¶è¿˜æœ‰å†…å­˜çº§åˆ«çš„ç¼“å­˜æ–¹æ³•å¯ä¾›é€‰æ‹©ï¼Œå…·ä½“æ–¹æ¡ˆåº”æ ¹æ®ä¸åŒä¸šåŠ¡å½¢æ€è€Œå®šã€‚æ¯ç§æ–¹æ¡ˆå‡æœ‰å…¶ä¼˜ç‚¹åŠç¼ºé™·ï¼Œå› æ­¤é€‰æ‹©æœ€é€‚åˆè‡ªå·±ä¸šåŠ¡éœ€æ±‚çš„æ–¹å¼æ‰èƒ½æ˜¯æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚

## å®ç°è¿‡ç¨‹

åœ¨è§£æç›¸å…³æµç¨‹åï¼Œæˆ‘ä»¬ç°åœ¨è¿›å…¥äº†å®é™…æ“ä½œé˜¶æ®µï¼Œæ–‡ä¸­æ¶‰åŠçš„ä»£ç å·²ç»åœ¨ä»“åº“ä¸­ï¼Œå¯ä»¥è¿›è¡ŒæŸ¥é˜…å’Œè°ƒè¯•ã€‚

### åˆ›å»ºpreviewé¡µé¢

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨ **editor** åº”ç”¨çš„ **pages** ç›®å½•ä¸‹ï¼Œåˆ›å»º **preview/\$id.tsx** è·¯ç”±ï¼Œå®ƒçš„å®é™…ä½œç”¨å°±æ˜¯åˆ›å»ºä¸€ä¸ªåŠ¨æ€çš„ **perview** é¡µé¢ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š**/preview/uid-100ã€/preview/uid-101ï¼Œ/preview/uid-102**ã€‚å› æ­¤å®ƒçš„æ•ˆæœç­‰åŒäº`/preview/{uid}`çš„æ¨¡å¼ã€‚

åœ¨è¿™é‡Œå°±ä¸è¿‡å¤šå™è¿°äº†ï¼Œå¯ä»¥æŸ¥é˜… **umi** çš„åŠ¨æ€è·¯ç”±ç« èŠ‚, ä¼šæœ‰æ›´å…¨é¢çš„é˜è¿°ã€‚ã€[ç‚¹å‡»ç›´è¾¾](https://umijs.org/docs/guides/routes#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1)ã€‘

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/573486066da24d1aa124b4e5b031ee91~tplv-k3u1fbpfcp-zoom-1.image)

### é¢„è§ˆå…¥å£

é¦–å…ˆï¼Œåœ¨ç¼–è¾‘å™¨ä¸­æ·»åŠ é¢„è§ˆæŒ‰é’®ï¼Œä»¥æ–¹ä¾¿æ“ä½œã€‚è¯¥æŒ‰é’®ä½äºç¼–è¾‘å™¨å³ä¸Šè§’çš„ **ToolBar** åŒºåŸŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ç‚¹å‡»è¯¥æŒ‰é’®åï¼Œå°†ä¼šè·³è½¬è‡³ `/preview` é¡µé¢ï¼Œè¿›å…¥é¢„è§ˆçŠ¶æ€ã€‚

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50f9de4a05c24fee81a7015a11a23dc5~tplv-k3u1fbpfcp-zoom-1.image)

å…·ä¸‹é¢æ˜¯å…·ä½“çš„å®ç°æ­¥éª¤ã€‚åœ¨é¢„è§ˆæŒ‰é’®ä¸Šç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œå¹¶å®ç° **handlePreviewEvt** æ–¹æ³•ã€‚è¯¥æ–¹æ³•å†…éƒ¨é€»è¾‘å¯ä»¥å‚è€ƒå‰é¢çš„æµç¨‹å›¾ï¼Œé¦–å…ˆè·å–å½“å‰é¡µé¢çš„ **schema** æ•°æ®ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ **previewId** ä½œä¸ºæ ‡è¯†ï¼Œå¹¶å°†å…¶å­˜å‚¨åˆ° **sessionStorage** ä¸­ã€‚æœ€åï¼Œä½¿ç”¨ **history** è¿›è¡Œé¡µé¢è·³è½¬ï¼Œè¿›å…¥ `/preview` é¡µé¢ã€‚

```tsx
const { query } = useEditor()

// å¤„ç†é¢„è§ˆé€»è¾‘
const handlePreviewEvt = () => {
  // è·å–å½“å‰schema
  const schema = query.serialize()
  const previewId = "uid-" + new Date().getTime()
  sessionStorage.setItem(previewId, schema)
  history.push(`/preview/${previewId}`)
}

  <Button onClick={handlePreviewEvt} >
  <Space size={2}>
    <CaretRightOutlined />
    é¢„è§ˆ
  </Space>
  </Button>
```

ç‚¹å‡»é¢„è§ˆæŒ‰é’®åï¼Œä¼šåœ¨ **sessionStorage** ä¸­è‡ªåŠ¨ç”Ÿæˆä¸€æ¡è®°å½•ï¼Œè®°å½•å†…å®¹ä¸ºå½“å‰é¡µé¢çš„ **Schema** åè®®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a020e1d111ac4c448c1dc9d357ababc2~tplv-k3u1fbpfcp-zoom-1.image)

### context

ä¸ºäº†åç»­çš„ç»Ÿä¸€å¤„ç†ï¼Œä¹‹å‰æ‰€æœ‰çš„ **provider** éƒ½æ˜¯åœ¨ **components/framework/index.ts** ä¸­è¿›è¡Œå¼€å‘ã€‚

ç°åœ¨ï¼Œä¸ºäº†æ›´å¥½åœ°ç»´æŠ¤å’Œå…¨å±€åº”ç”¨ä¸­ä½¿ç”¨ï¼Œå› æ­¤å°†æ•´ä¸ª **FrameworkContextProvider** ç»„ä»¶æ”¾åœ¨äº†
**@lgnition-lowcode/core** ä¸­ã€‚è¯¥ç»„ä»¶åŒ…å«äº† **EditorProvider**ã€**StoreProvider** ç­‰å¤šä¸ª **useContext** å¼•ç”¨å’Œå¯¼å‡ºï¼Œ

å®ç°ä»£ç å¦‚ä¸‹ï¼š

```tsx
import * as React from "react";
import { Editor } from "@craftjs/core";
import { Provider as StoreProvider } from "react-redux";
import { store } from  './store'

type EditorProps = React.ComponentProps<typeof Editor>;

export type FrameworkProviderProps = Pick<EditorProps, "enabled">;

export const FrameworkContext = React.createContext<EditorProps | null>({
  enabled: true,
});

export const FrameworkContextProvider = (props: EditorProps) => {
  return (
    <StoreProvider store={store} >
      <FrameworkContext.Provider
        value={{
          enabled: props.enabled,
        }}
      >
        <Editor {...props}>{props.children}</Editor>
      </FrameworkContext.Provider>
    </StoreProvider>
  );
};
```

ä»¥ä¸‹æ˜¯ **FrameworkContextProvider** çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå®ƒå¯ä»¥æ¥æ”¶ **Editor** ç»„ä»¶çš„å‚æ•°ï¼ŒåŒæ—¶ä¹Ÿå…·æœ‰å…¶ä»– **Provider** çš„åŠŸèƒ½ã€‚åœ¨è¿›è¡Œæ‰©å±•æ—¶ï¼Œå¯ä»¥å°†å¤§éƒ¨åˆ†æ³¨å…¥é…ç½®æ”¶æ•›èµ·æ¥ã€‚

ä»£ç ç¤ºä¾‹ï¼š

```tsx
import type { FrameworkProviderProps } from "@lgnition-lowcode/core";
import { FrameworkContextProvider } from "@lgnition-lowcode/core";

export const Framework = React.forwardRef<FrameworRef, FrameworkProps>(
  (props, ref) => {
    const { token } = useTokens();
    return (
      <FrameworkContextProvider
        enabled={props.enabled}
        resolver={_materials_}
        onRender={RenderNodeWrapper}
        onNodesChange={(dragProps) => console.log(`onNodesChange`, dragProps)}
        >
        <MountRef ref={ref} />
        {...}
      </FrameworkContextProvider>
    );
  }
);
```

### MountRef

**mountRef** æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨äºå•ç‹¬æ¥ç®¡ç†ç¼–è¾‘å™¨çš„ä¸€äº›å¯¹å¤–æš´éœ²é’©å­çš„æ‰‹æ®µä¹‹ä¸€ã€‚ç”±äºç¼–è¾‘å™¨æ˜¯ä¸€ä¸ª **SDK** æ•´ä½“ï¼Œé‚£ä¹ˆä¸åº”ç”¨ä¹‹é—´çš„äº¤äº’æ‰‹æ®µå°±æ¯”è¾ƒæ˜ç¡®äº†ï¼Œä¸€ç§æ˜¯é€šè¿‡ **props** æ¥ä¼ é€’å‚æ•°ï¼Œå¦å¤–ä¸€ç§å°±æ˜¯é€šè¿‡ **ref** äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd9240ce0e28462da18c35a16f63f187~tplv-k3u1fbpfcp-zoom-1.image)

**Framework** ç»„ä»¶ä½¿ç”¨ **React.forwardRef** è¿›è¡Œ **ref** é€ä¼ ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ **MountRef** ç»„ä»¶è¿›è¡Œç»‘å®šã€‚

è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œå†…éƒ¨éœ€è¦ä½¿ç”¨ **useEditor** è¿›è¡Œç¼–è¾‘å™¨ç›¸å…³çš„æ“ä½œï¼Œå› æ­¤å¿…é¡»ç¡®ä¿ **useEditor** åœ¨ä½¿ç”¨æ—¶æ˜¯å®Œå…¨ä½äº **Editor** ç»„ä»¶å†…éƒ¨çš„ã€‚å› æ­¤ï¼Œå®ç°äº†ä¸€ä¸ª **MountRef** ç»„ä»¶ï¼Œä¸“é—¨ç”¨äºå¤„ç†æš´éœ²ç»™å¤–éƒ¨çš„å®ä¾‹æ–¹æ³•ï¼Œå¦‚åŸºäº **useEditor** å®ç°çš„ **onLoadState** æ–¹æ³•ï¼Œ **Schema** æ•°æ®é‡æ–°åŠ è½½è¿›å…¥ç¼–è¾‘å™¨ã€‚

ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```tsx
import * as React from 'react'
import { useEditor } from "@craftjs/core"
import lz from 'lzutf8'

export interface FrameworRef {
  onLoadState: (json: string, options?: {
    useState?: boolean;
  }) => void;
}

export const MountRef = React.forwardRef<FrameworRef>((_, ref) => {
  const { actions } = useEditor()

  React.useImperativeHandle(ref, () => ({
    /**
     * ä¿®æ”¹å½“å‰
     * @param json stateText æˆ–è¿™æ˜¯ JOSN
     * @param options 
     */
    onLoadState(json, options) {
      let data = json
      if (options?.useState) {
        data = lz.decompress(lz.decodeBase64(data));
      }
      actions.deserialize(data)
    }
  }))

  return null
})
```

### åŠ è½½æœ¬åœ°å­˜å‚¨

åœ¨å®Œæˆé¢„è§ˆé¡µé¢çš„æœ€åä¸€æ­¥å·¥ä½œä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªè¿‡ç¨‹æ¥è·å–å­˜å‚¨çš„ **schema**ã€‚å…·ä½“æ¥è¯´å°±æ˜¯å¯ä»¥é€šè¿‡ä½¿ç”¨ **useParams** æ¥è·å–å½“å‰åŠ¨æ€è·¯ç”±çš„ **uid**ï¼Œæ¥ç€è°ƒç”¨ **sessionStorage.getItem** æ–¹æ³•æ¥è·å–å½“å‰å­˜å‚¨åŒºä¸­çš„æ•°æ®ã€‚æœ€åä½¿ç”¨ **editorFrameworkRef.current.onLoadState** æ–¹æ³•æ¥è¿›è¡ŒåŠ è½½ã€‚

å®ç°ä»£ç å¦‚ä¸‹ï¼š

```tsx
import * as React from 'react'
import { Framework as EditorFramework } from '@/components/framework'
import type { FrameworRef } from '@/components/framework/mount-ref'
import { Frame } from '@/components/framework/canvas/frame'
import { useParams } from '@umijs/max'
export default () => {

  const editorFrameworkRef = React.useRef<FrameworRef>(null)
  const params = useParams()

  console.log(editorFrameworkRef, 'editorFrameworkRef')

  React.useEffect(() => {
    if (params.id) {
      const schema = sessionStorage.getItem(params.id)
      // setSchemaData(schema)
      if (editorFrameworkRef?.current && schema) {
        editorFrameworkRef.current?.onLoadState(schema)
      }
    }
    return () => {
    }
  }, [params.id])

  return (
    <EditorFramework enabled={false} ref={editorFrameworkRef} >
      <Frame/>
    </EditorFramework>
  )
}
```

å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨ **localStorage** æ¥å­˜å‚¨çŠ¶æ€ï¼Œå®ç°çš„è¿‡ç¨‹ä¸ä½¿ç”¨ **sessionStorage** ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®Œæˆï¼š

1.  ä½¿ç”¨ **localStorage.setItem** æ–¹æ³•æ¥ä¿å­˜ **Schema** åè®®ï¼Œè¿™ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·åœ¨è¿›è¡Œæ“ä½œæ—¶ä¿ç•™å…¶æ‰€åšçš„æ›´æ”¹çŠ¶æ€ã€‚
2.  åœ¨æœ¬åœ°é¢„è§ˆæ¨¡å—ä¸­ï¼Œéœ€è¦ä½¿ç”¨ **localStorage.getItem** æ–¹æ³•æ¥è·å–å½“å‰å­˜å‚¨åŒºä¸­çš„æ•°æ®ï¼Œè¿™å¯ä»¥ç”¨æ¥æ¢å¤ä¹‹å‰æ‰€åšçš„æ›´æ”¹çŠ¶æ€ã€‚
3.  åœ¨ç”¨æˆ·è¿›è¡Œæ“ä½œæ—¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ **localStorage.setItem** æ–¹æ³•æ¥æ›´æ–°å½“å‰å­˜å‚¨åŒºçš„æ•°æ®ï¼Œèƒ½å¤Ÿä¿è¯æœ¬åœ°é¢„è§ˆæ¨¡å—èƒ½å¤Ÿå®æ—¶åæ˜ ç”¨æˆ·æ‰€åšçš„æ›´æ”¹ã€‚

### ç¼–è¾‘æ€ç¦ç”¨

ä¹‹å‰æåˆ°äº†ç¼–è¾‘çŠ¶æ€ä¸‹éœ€è¦åšä¸€äº›ç¦ç”¨å¤„ç†ï¼Œé¦–å…ˆå°±æ˜¯å…³é—­ **Editor** çš„ç¼–è¾‘æ¨¡å¼ï¼Œåœ¨è¿™é‡Œé€šè¿‡å±æ€§
**enabled={false}** è¿›è¡Œè®¾ç½®å³å¯ã€‚

```diff
<EditorFramework 
+  enabled={false} 
  ref={editorFrameworkRef}
  >
  <Frame />
</EditorFramework>
```

é™¤æ­¤ä¹‹å¤–ï¼Œå°±æ˜¯ä¸“é—¨æœå½¹äºç¼–è¾‘å™¨çš„ä¸€äº›ç‰©æ–™ç»„ä»¶ä¹Ÿéœ€è¦è¿›è¡Œç›¸åº”çš„å¤„ç†ï¼Œå¦‚ä¸‹æ’æ§½ç»„ä»¶çš„ç¼–è¾‘æ€å ä½å†…å®¹ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡ **React.useContext(FrameworkContext)** æ¥è·å–å…±äº«çš„ **enabledçŠ¶æ€** ååˆ¤æ–­æ˜¯å¦éœ€è¦åœ¨å†…å®¹ä¸ºç©ºçš„æƒ…å†µä¸‹æ˜¾ç¤º **SlotEmpty** ç»„ä»¶ã€‚

å¦‚ä¸‹ä»£ç ï¼š

```Diff
import * as React from "react";
import {
  createReactMaterial,
  withMaterialNode,
+ FrameworkContext,
} from "@lgnition-lowcode/core";
import { SlotEmpty } from "./empty";

export interface SlotProps {
  children?: React.ReactNode;
  empty?: React.ReactNode;
}

const SlotView = withMaterialNode<SlotProps>(
  React.forwardRef((props, ref: React.LegacyRef<HTMLDivElement>) => {
+    const frameworkContext = React.useContext(FrameworkContext);

+    const emptyRender = frameworkContext?.enabled ? <SlotEmpty>{props.empty}</SlotEmpty> : null;

    return (
      <div ref={ref} style={{}}>
       {props.children ? props.children : emptyRender}
      </div>
    );
  })
);

export const Slot = createReactMaterial(SlotView, {});
```

## æ€»ç»“

é€šè¿‡å®ç°è¿™äº›è¦ç‚¹ï¼Œæˆ‘ä»¬æˆåŠŸåœ°è®¾è®¡å‡ºäº†ä¸€ä¸ªåŸºæœ¬çš„æœ¬åœ°é¢„è§ˆæ¨¡å—ï¼Œä»è€Œæå‡ä½ä»£ç å¹³å°çš„ç”¨æˆ·é¢„è§ˆä½“éªŒã€‚å½“æ‚¨å®Œæˆ**Schema**æ•°æ®çš„æœ¬åœ°å­˜å‚¨å’Œæ¢å¤é€»è¾‘åï¼Œåç»­å‘å¸ƒè¿œç¨‹å­˜å‚¨çš„æµç¨‹ä¹Ÿå°†å¾—å¿ƒåº”æ‰‹ã€‚

åœ¨å®ç°æœ¬åœ°é¢„è§ˆæ¨¡å—åï¼Œæ•´ä¸ªç¼–è¾‘å™¨ç¯èŠ‚ä»ç‰©æ–™è£…è½½åˆ°è¿‡ç¨‹æ­å»ºä»¥åŠåè®®å­˜å‚¨çš„é“¾è·¯éƒ½å·²ç»å®ç°äº†æœ€å°é—­ç¯ã€‚åç»­çš„åŠŸèƒ½å°†åŸºäºæ­¤è¿›è¡Œæ‰©å±•ï¼Œæœ€ç»ˆæ‚¨å°†èƒ½å¤Ÿå‡­å€Ÿè‡ªå·±çš„æƒ³æ³•å®Œæˆå¯è§†åŒ–ç¼–è¾‘å™¨çš„å®ç°ã€‚

ç¼–è¾‘æ€ä¸é¢„è§ˆæ€çš„å…·ä½“å‘ˆç°æ•ˆæœå¦‚ä¸‹ï¼š

**ç¼–è¾‘æ€**

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b137a61ba8d4525adf79b2ae4b1d052~tplv-k3u1fbpfcp-zoom-1.image)

**é¢„è§ˆç•Œé¢**

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7670ca34e529457089ef47c167093500~tplv-k3u1fbpfcp-zoom-1.image)

## èµ„æºæ¨è

*   <https://umijs.org/docs/guides/routes#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1>
*   <https://craft.js.org/docs/api/editor#props>
*   <https://github.com/Ignition-Space/Ignition-web/blob/main/packages/core/src/context/index.tsx>
*   <https://github.com/Ignition-Space/Ignition-web/blob/main/packages/core/src/context/mount-ref.tsx>
*   <https://github.com/IgnitionSpace/Ignitionweb/blob/main/apps/editor/src/pages/preview/%24id.tsx>

## å†™åœ¨æœ€å

å¦‚æœä½ æœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…æ›´å¥½çš„å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæå‡ºæˆ–è€…åŠ ç¾¤æ²Ÿé€šã€‚ ğŸ‘
