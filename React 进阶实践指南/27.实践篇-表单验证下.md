## ä¸€ å‰è¨€
ä¸Šä¸€ç« èŠ‚ä¸»è¦è®²äº† Form è¡¨å•çš„è®¾è®¡åŸåˆ™ï¼Œä»¥åŠçŠ¶æ€ç®¡ç† FormStore å’Œè‡ªå®šä¹‰ hooks useForm çš„ç¼–å†™ï¼Œæœ¬ç« èŠ‚å°†ç»§ç»­ä¸Šä¸€ç« èŠ‚æ²¡æœ‰è®²å®Œçš„éƒ¨åˆ†ã€‚

é€šè¿‡æœ¬ç« èŠ‚çš„å­¦ä¹ ï¼Œä½ å°†æ”¶è·ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š

* Form è®¾è®¡åŠå…¶ç¼–å†™ã€‚
* FormItem è®¾è®¡åŠå…¶ç¼–å†™ã€‚

## äºŒ Form ç¼–å†™

### 1 å±æ€§åˆ†æ

**å±æ€§è®¾å®š**

|  å±æ€§åç§°   | ä½œç”¨  | ç±»å‹   | 
|  ----  | ----  |   ----   | 
|  `form`   | ä¼ å…¥`useForm` åˆ›å»ºçš„ `FormStore`å®ä¾‹    |  `FormStore` å®ä¾‹å¯¹è±¡  | 
| `onFinish`  | è¡¨å•æäº¤æˆåŠŸè°ƒç”¨ |  function ï¼Œä¸€ä¸ªå‚æ•°ï¼Œä¸ºè¡¨å•çš„æ•°æ®å±‚ | 
| `onFinishFailed`  | è¡¨å•æäº¤å¤±è´¥è°ƒç”¨ |  function ï¼Œä¸€ä¸ªå‚æ•°ï¼Œä¸ºè¡¨å•çš„æ•°æ®å±‚ | 
| `initialValues`   | è®¾ç½®è¡¨å•åˆå§‹åŒ–çš„å€¼  | object   | 


**ç»†èŠ‚é—®é¢˜**

* Form æ¥æ”¶ç±»ä¼¼ `onFinish` ï½œ `onFinishFailed` ç›‘å¬å›è°ƒå‡½æ•°ã€‚

* Form å¯ä»¥è¢« ref æ ‡è®°ï¼Œref å¯ä»¥è·å– `FormStore` æ ¸å¿ƒæ–¹æ³•ã€‚

* Form è¦ä¿ç•™åŸç”Ÿçš„ form å±æ€§ï¼Œå½“ submit æˆ–è€… reset è§¦å‘ï¼Œè‡ªåŠ¨æ ¡éªŒ/é‡ç½®ã€‚

### 2 ä»£ç å®ç°

**åˆ›å»º context ä¿å­˜ `FormStore` æ ¸å¿ƒ Api**ã€‚

````js
import {  createContext  } from 'react'
/* åˆ›å»ºä¸€ä¸ª FormContext */
const  FormContext = createContext()

export default FormContext
````

* åˆ›å»ºä¸€ä¸ª context ç”¨æ¥ä¿å­˜ `FormStore` çš„æ ¸å¿ƒ API ã€‚

**æ¥ä¸‹æ¥å°±æ˜¯é‡ç‚¹ `Form` ç¼–å†™**

````js
function Form ({
    form,
    onFinish,
    onFinishFailed,
    initialValues,
    children
},ref){
    /* åˆ›å»º form çŠ¶æ€ç®¡ç†å®ä¾‹ */
    const formInstance = useForm(form,initialValues)
    /* æŠ½ç¦»å±æ€§ -> æŠ½ç¦» dispatch ï½œ setCallback è¿™ä¸¤ä¸ªæ–¹æ³•ä¸èƒ½å¯¹å¤–æä¾›ã€‚  */
    const { setCallback, dispatch  ,...providerFormInstance } = formInstance

    /* å‘ form ä¸­æ³¨å†Œå›è°ƒå‡½æ•° */
    setCallback({
        onFinish,
        onFinishFailed
    })

    /* Form èƒ½å¤Ÿè¢« ref æ ‡è®°ï¼Œå¹¶æ“ä½œå®ä¾‹ã€‚ */
    useImperativeHandle(ref,() => providerFormInstance , [])
    /* ä¼ é€’ */
    const RenderChildren = <FormContext.Provider value={formInstance} > {children} </FormContext.Provider>

    return <form
        onReset={(e)=>{
            e.preventDefault()
            e.stopPropagation()
            formInstance.resetFields() /* é‡ç½®è¡¨å• */
        }}
        onSubmit={(e)=>{
            e.preventDefault()
            e.stopPropagation()
            formInstance.submit()      /* æäº¤è¡¨å• */
        }}
           >
           {RenderChildren}
        </form>
}

export default forwardRef(Form)
````

Form å®ç°ç»†èŠ‚åˆ†æï¼š

* é¦–å…ˆé€šè¿‡ useForm åˆ›å»ºä¸€ä¸ª `formInstance` ï¼Œé‡Œé¢ä¿å­˜ç€æ“çºµè¡¨å•çŠ¶æ€çš„æ–¹æ³•ï¼Œæ¯”å¦‚ `getFieldValue` ï¼Œ `setFieldsValue` ç­‰ã€‚

* ä» `formInstance` æŠ½ç¦»å‡º setCallback ï¼Œdispatch ç­‰æ–¹æ³•ï¼Œå¾—åˆ° `providerFormInstance` ï¼Œå› ä¸ºè¿™äº› api ä¸æœŸæœ›ç›´æ¥ç»™å¼€å‘è€…ä½¿ç”¨ã€‚é€šè¿‡ forwardRef + useImperativeHandle æ¥è½¬å‘ refï¼Œ å°† providerFormInstance èµ‹å€¼ç»™ ref ï¼Œ å¼€å‘è€…é€šè¿‡ ref æ ‡è®° Form ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è·å–çš„ providerFormInstance å¯¹è±¡ã€‚

* é€šè¿‡ Context.Provider å°† `formInstance` ä¼ é€’ä¸‹å»ï¼Œæä¾›ç»™ `FormItem` ä½¿ç”¨ã€‚

* åˆ›å»ºåŸç”Ÿ form æ ‡ç­¾ï¼Œç»‘å®š React äº‹ä»¶ â€”â€” `onReset` å’Œ `onSubmit`ï¼Œåœ¨äº‹ä»¶å†…éƒ¨åˆ†åˆ«è°ƒç”¨ï¼Œ é‡ç½®è¡¨å•çŠ¶æ€çš„ `resetFields` å’Œæäº¤è¡¨å•çš„ `onSubmit`æ–¹æ³•ã€‚

## ä¸‰ FormItem ç¼–å†™

æ¥ä¸‹æ¥å°±æ˜¯ `FormItem` çš„å…·ä½“å®ç°ç»†èŠ‚ã€‚

### 1 å±æ€§åˆ†æ

ç›¸æ¯” antd ä¸­çš„ FormItem ï¼Œå±æ€§è¦ç²¾ç®€çš„å¤šï¼Œè¿™é‡Œæˆ‘ä¿ç•™äº†ä¸€äº›æ ¸å¿ƒçš„å±æ€§ã€‚

|  å±æ€§åç§°   | ä½œç”¨  | ç±»å‹   | 
|  ----  | ----  |   ----   | 
|  `name` (é‡è¦å±æ€§)  | è¯æ˜è¡¨å•å•å…ƒé¡¹çš„é”® name  | string   | 
|  `label`   | è¡¨å•æ ‡ç­¾å±æ€§  | string   | 
|  `height`   | è¡¨å•å•å…ƒé¡¹é«˜åº¦ | number   | 
|  `labelWidth`  | lable å®½åº¦  | number   | 
|  `required`   | æ˜¯å¦å¿…å¡«  | boolean   | 
|  `trigger`   |  æ”¶é›†å­—æ®µå€¼å˜æ›´çš„æ–¹æ³• | string ï¼Œ é»˜è®¤ä¸º onChange   | 
|  `validateTrigger`   | éªŒè¯æ ¡éªŒè§¦å‘çš„æ–¹æ³•  | stringï¼Œé»˜è®¤ä¸º onChange   | 
|  `rules`   | éªŒè¯ä¿¡æ¯  | é‡Œé¢åŒ…æ‹¬éªŒè¯æ–¹æ³• rule å’Œ éªŒè¯å¤±è´¥æç¤ºæ–‡æ¡ˆ message   | 


### 2 ä»£ç å®ç°

æ¥ä¸‹æ¥å°±æ˜¯ FormItem çš„ä»£ç å®ç°ã€‚

````js
function FormItem ({
    name,
    children,
    label,
    height = 50 ,
    labelWidth,
    required = false ,
    rules = {},
    trigger = 'onChange',
    validateTrigger = 'onChange'
}){
    const formInstance  = useContext(FormContext)
    const { registerValidateFields , dispatch , unRegisterValidate } = formInstance
    const [ , forceUpdate ] = useState({})
    const onStoreChange = useMemo(()=>{
        /* ç®¡ç†å±‚æ”¹å˜ => é€šçŸ¥è¡¨å•é¡¹ */
        const onStoreChange = {
            changeValue(){
                forceUpdate({})
            }
         }
        return onStoreChange

    },[ formInstance ])
    useEffect(()=>{
         /* æ³¨å†Œè¡¨å• */
        name && registerValidateFields(name,onStoreChange,{ ...rules , required })
        return function(){
            /* å¸è½½è¡¨å• */
           name &&  unRegisterValidate(name)
        }
    },[ onStoreChange ])
     /* ä½¿è¡¨å•æ§ä»¶å˜æˆå¯æ§åˆ¶çš„ */
    const getControlled = (child)=> {
        const mergeChildrenProps = { ...child.props }
        if(!name) return mergeChildrenProps
         /* æ”¹å˜è¡¨å•å•å…ƒé¡¹çš„å€¼ */
        const handleChange  = (e)=> {
             const value = e.target.value
              /* è®¾ç½®è¡¨å•çš„å€¼ */
             dispatch({ type:'setFieldsValue' },name ,value)
         }
        mergeChildrenProps[trigger] = handleChange
        if(required || rules ){
             /* éªŒè¯è¡¨å•å•å…ƒé¡¹çš„å€¼ */
            mergeChildrenProps[validateTrigger] = (e) => {
                 /* å½“æ”¹å˜å€¼å’ŒéªŒè¯è¡¨å•ï¼Œç”¨ç»Ÿä¸€ä¸€ä¸ªäº‹ä»¶ */
                if(validateTrigger === trigger){
                    handleChange(e)
                }
                /* è§¦å‘è¡¨å•éªŒè¯ */
                dispatch({ type:'validateFieldValue' },name)
            }
        }
        /* è·å– value */
        mergeChildrenProps.value = dispatch({ type:'getFieldValue' }, name) || ''
        return mergeChildrenProps
    }
    let renderChildren
    if(isValidElement(children)){
        /* è·å– | åˆå¹¶ ï½œ è½¬å‘ | =>  props  */
        renderChildren = cloneElement(children, getControlled(children))
    }else{
        renderChildren = children
    }
    return <Label
        height={height}
        label={label}
        labelWidth={labelWidth}
        required={required}
           >
         {renderChildren}
         <Message
             name={name}
             {...dispatch({ type :'getFieldModel'},name)}
         />
     </Label>
}
````

**FormItem** çš„æµç¨‹æ¯”è¾ƒå¤æ‚ï¼Œæ¥ä¸‹æ¥æˆ‘å°†ä¸€ä¸€è®²è§£å…¶æµç¨‹ã€‚

* ç¬¬ä¸€æ­¥ï¼š FormItem ä¼šé€šè¿‡ useContext è·å–åˆ°è¡¨å•å®ä¾‹ä¸‹çš„æ–¹æ³•ã€‚
* ç¬¬äºŒæ­¥ï¼š åˆ›å»ºä¸€ä¸ª useState ä½œä¸º FormItem çš„æ›´æ–°å‡½æ•° onStoreChangeã€‚
* ç¬¬ä¸‰æ­¥ï¼š åœ¨ useEffect ä¸­è°ƒç”¨ `registerValidateFields` æ³¨å†Œè¡¨å•é¡¹ã€‚æ­¤æ—¶çš„ FormItem çš„æ›´æ–°å‡½æ•° onStoreChange ä¼šä¼ å…¥åˆ° FormStore ä¸­ï¼Œä¸Šä¸€ç« èŠ‚è®²åˆ°è¿‡ï¼Œæ›´æ–°æ–¹æ³•æœ€ç»ˆä¼šæ³¨å†Œåˆ° FormStore çš„ control å±æ€§ä¸‹ï¼Œè¿™æ · FormStore å°±å¯ä»¥é€‰æ‹©æ€§çš„è®©å¯¹åº”çš„ FormItem æ›´æ–°ã€‚åœ¨ useEffect é”€æ¯å‡½æ•°ä¸­ï¼Œè§£ç»‘è¡¨å•é¡¹ã€‚
* ç¬¬å››æ­¥ï¼š è®© FormItem åŒ…è£¹çš„è¡¨å•æ§ä»¶å˜æˆå—æ§çš„ï¼Œ é€šè¿‡ `cloneElement` å‘è¡¨å•æ§ä»¶ï¼ˆ æ¯”å¦‚ Input ï¼‰ props ä¸­ï¼Œæ³¨å†Œç›‘å¬å€¼å˜åŒ–çš„æ–¹æ³•ï¼Œé»˜è®¤ä¸º onChange ï¼Œä»¥åŠè¡¨å•éªŒè¯è§¦å‘çš„æ–¹æ³• ï¼Œé»˜è®¤ä¹Ÿæ˜¯ onChange ï¼Œæ¯”å¦‚å¦‚ä¸‹ä¾‹å­ğŸŒ°ï¼š

````js
   <FormItem
        label="è¯·è¾“å…¥å°å†Œåç§°"
        labelWidth={150}
        name="name"
        required
        rules={{
            rule:/^[a-zA-Z0-9_\u4e00-\u9fa5]{4,32}$/,
            message:'åç§°ä»…æ”¯æŒä¸­æ–‡ã€è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé•¿åº¦é™åˆ¶4~32ä¸ªå­—'
        }}
        trigger="onChange"
        validateTrigger="onBlur"
    >
        <Input
            placeholder="å°å†Œåç§°"
        />
    </FormItem>
````

å¦‚ä¸Šï¼Œå‘ FormItem ä¸­ï¼Œ ç»‘å®šç›‘å¬å˜åŒ–çš„äº‹ä»¶ä¸º `onChange`ï¼Œè¡¨å•éªŒè¯çš„äº‹ä»¶ä¸º `onBlur` ã€‚

**æ›´æ–°æµç¨‹** ï¼šé‚£ä¹ˆæ•´ä¸ªæµç¨‹ï¼Œå½“ç»„ä»¶å€¼æ”¹å˜çš„æ—¶å€™ï¼Œä¼šè§¦å‘ `onChange` äº‹ä»¶ï¼Œæœ¬è´¨ä¸Šè¢«ä¸Šé¢çš„ `getControlled` æ‹¦æˆªï¼Œå®è´¨ç”¨ dispatch è§¦å‘ setFieldsValue ï¼Œæ”¹å˜ FormStore è¡¨å•çš„å€¼ï¼Œç„¶å FormStore ä¼šç”¨ onStoreChange ä¸‹çš„ changeValue é€šçŸ¥å½“å‰ FormItem æ›´æ–°ï¼ŒFormItem æ›´æ–°é€šè¿‡ dispatch è°ƒç”¨ getFieldValue è·å–è¡¨å•çš„æœ€æ–°å€¼ï¼Œå¹¶æ¸²æŸ“è§†å›¾ã€‚è¿™æ ·å®Œæˆæ•´ä¸ªå—æ§ç»„ä»¶çŠ¶æ€æ›´æ–°æµç¨‹ã€‚

**éªŒè¯æµç¨‹ï¼š** å½“è§¦å‘ `onBlur` æœ¬è´¨ä¸Šç”¨ dispatch è°ƒç”¨ validateFieldValue äº‹ä»¶ï¼ŒéªŒè¯è¡¨å•ï¼Œç„¶å FormStore ä¼šä¸‹å‘éªŒè¯çŠ¶æ€ï¼ˆæ˜¯å¦éªŒè¯é€šè¿‡ï¼‰ã€‚

å®Œæˆ**æ›´æ–°/éªŒè¯**æµç¨‹ã€‚

* ç¬¬äº”æ­¥ï¼šæ¸²æŸ“ `Label` å’Œ `Message` UI è§†å›¾ã€‚

## å›› Indexæ–‡ä»¶åŠå…¶ä»–ç»„ä»¶

è¿˜æœ‰ä¸€äº›è´Ÿè´£ UI æ¸²æŸ“çš„ç»„ä»¶ï¼Œä»¥åŠè¡¨å•æ§ä»¶ï¼Œè¿™é‡Œå°±ç®€å•ä»‹ç»ä¸€ä¸‹ï¼š


### Label

````js
function Label({ children , label ,labelWidth , required ,height}){
    return <div className="form-label"
        style={{ height:height + 'px'  }}
           >
       <div
           className="form-label-name"
           style={{ width : `${labelWidth}px` }}
       >
           {required ? <span style={{ color:'red' }} >*</span> : null}
           {label}:
        </div>  {children}
    </div>
}
````

* Label çš„ä½œç”¨å°±æ˜¯æ¸²æŸ“è¡¨å•çš„æ ‡ç­¾ã€‚

### Message

````js
function Message(props){
    const { status , message , required , name , value } = props
    let showMessage = ''
    let color = '#fff'
    if(required && !value && status === 'reject'  ){
        showMessage = `${name} ä¸ºå¿…å¡«é¡¹`
        color = 'red'
    }else if(status === 'reject'){
        showMessage = message
        color = 'red'
    }else if(status === 'pendding'  ){
        showMessage = null
    }else if( status === 'resolve' ){
        showMessage = 'æ ¡éªŒé€šè¿‡'
        color = 'green'
    }
    return <div className="form-message" >
       <span style={{ color  }}  >{showMessage}</span>
    </div>
}
````

* message æ˜¾ç¤ºè¡¨å•éªŒè¯çš„çŠ¶æ€ï¼Œæ¯”å¦‚å¤±è´¥æ—¶å€™çš„æç¤ºæ–‡æ¡ˆç­‰ï¼ŒæˆåŠŸæ—¶å€™çš„æç¤ºæ–‡æ¡ˆã€‚

### Input 

````js
const Input = (props) => {
    return <input
        className="form-input"
        {...props}
           />
}
````

* Input æœ¬è´¨ä¸Šå°±æ˜¯ input æ ‡ç­¾ã€‚

### Select ç»„ä»¶

````js
function Select({ children,...props }){
    return <select {...props}
        className="form-input"
           >
        <option label={props.placeholder}
            value={null}
        >{props.placeholder}</option>
        {children}
    </select>
}
/* ç»‘å®šé™æ€å±æ€§   */
Select.Option = function ( props ){
    return <option {...props}
        className=""
        label={props.children}
           ></option>
}

export default Select
````

### Indexæ–‡ä»¶

Index æ–‡ä»¶å¯¹ç»„ä»¶æ•´ç†ï¼Œå¹¶æš´éœ²ç»™å¼€å‘è€…ä½¿ç”¨ã€‚

````js
import Form from './component/Form'
import FormItem from './component/FormItem'
import Input from './component/Input'
import Select from './component/Select'

Form.FormItem = FormItem

export {
    Form,
    Select,
    Input,
    FormItem
}

export default Form
````

## äº” éªŒè¯åŠŸèƒ½

### éªŒè¯ demo ç¼–å†™

````js
import React , { useRef , useEffect } from 'react'

import Form , { Input , Select } from './form'

const FormItem = Form.FormItem
const Option = Select.Option

function Index(){
    const form = useRef(null)
    useEffect(()=>{
        console.log(form.current,'form.current')
    },[])
    const handleClick = () => {
         form.current.submit((res)=>{
             console.log(res)
         })
    }
    const handleGetValue = ()=>{
        console.log( form.current , 'form.current ' )
    }
    return <div style={{ marginTop:'50px' }} >
        <Form  initialValues={{ author : 'æˆ‘ä¸æ˜¯å¤–æ˜Ÿäºº' }}
            ref={form}
        >
            <FormItem
                label="è¯·è¾“å…¥å°å†Œåç§°"
                labelWidth={150}
                name="name"
                required
                rules={{
                    rule:/^[a-zA-Z0-9_\u4e00-\u9fa5]{4,32}$/,
                    message:'åç§°ä»…æ”¯æŒä¸­æ–‡ã€è‹±æ–‡å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé•¿åº¦é™åˆ¶4~32ä¸ªå­—'
                }}
                validateTrigger="onBlur"
            >
                 <Input
                     placeholder="å°å†Œåç§°"
                 />
            </FormItem>
            <FormItem
                label="ä½œè€…"
                labelWidth={150}
                name="author"
                required
                validateTrigger="onBlur"
            >
                 <Input
                     placeholder="è¯·è¾“å…¥ä½œè€…"
                 />
            </FormItem>
            <FormItem label="é‚®ç®±"
                labelWidth={150}
                name="email"
                rules={{ rule: /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/ ,message:'é‚®ç®±æ ¼å¼é”™è¯¯ï¼'  }}
                validateTrigger="onBlur"
            >
                <Input
                    placeholder="è¯·è¾“å…¥é‚®ç®±"
                />
            </FormItem>
            <FormItem label="æ‰‹æœº"
                labelWidth={150}
                name="phone"
                rules={{ rule: /^1[3-9]\d{9}$/ ,message:'æ‰‹æœºæ ¼å¼é”™è¯¯ï¼'  }}
                validateTrigger="onBlur"
            >
                <Input
                    placeholder="è¯·è¾“å…¥é‚®ç®±"
                />
            </FormItem>
            <FormItem label="ç®€ä»‹"
                labelWidth={150}
                name="des"
                rules={{ rule: (value='') => value.length < 5   ,message:'ç®€ä»‹ä¸è¶…è¿‡äº”ä¸ªå­—ç¬¦'  }}
                validateTrigger="onBlur"
            >
                <Input placeholder="è¾“å…¥ç®€ä»‹"  />
            </FormItem>
            <FormItem label="ä½ æœ€å–œæ¬¢çš„å‰ç«¯æ¡†æ¶"
                labelWidth={150}
                name="likes"
                required
            >
                <Select  defaultValue={null}
                    placeholder="è¯·é€‰æ‹©"
                    width={120}
                >
                    <Option
                        value={1}
                    > React.js </Option>
                    <Option value={2} > Vue.js </Option>
                    <Option value={3} > Angular.js </Option>
                </Select>
            </FormItem>
            <button className="searchbtn"
                onClick={handleClick}
                type="button"
            >æäº¤</button>
            <button className="concellbtn"
                type="reset"
            >é‡ç½®</button>
        </Form>
       <div style={{ marginTop:'20px' }} >
            <span>éªŒè¯è¡¨å•åŠŸèƒ½</span>
            <button className="searchbtn"
                onClick={handleGetValue}
                style={{ background:'green' }}
            >è·å–è¡¨å•æ•°å±‚</button>
            <button className="searchbtn"
                onClick={()=> form.current.validateFields((res)=>{ console.log('æ˜¯å¦é€šè¿‡éªŒè¯ï¼š' ,res ) })}
                style={{ background:'orange' }}
            >åŠ¨æ€éªŒè¯è¡¨å•</button>
            <button className="searchbtn" onClick={() => { form.current.setFieldsValue('des',{
                    rule: (value='') => value.length < 10,
                    message:'ç®€ä»‹ä¸è¶…è¿‡åä¸ªå­—ç¬¦'
                }) }}
                style={{ background:'purple' }}
            >åŠ¨æ€è®¾ç½®æ ¡éªŒè§„åˆ™</button>
       </div>
    </div>
}

export default Index
````

### éªŒè¯æ•ˆæœ


æ¥ä¸‹æ¥å°±æ˜¯éªŒè¯ç¯èŠ‚ï¼š

**â‘  è¡¨å•éªŒè¯æœªé€šè¿‡**


![fail.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e64e5028369f4e2ea0d93d8007d0d842~tplv-k3u1fbpfcp-watermark.image)

è°ƒç”¨ submit ï¼ŒéªŒè¯å¤±è´¥çš„æƒ…å†µã€‚

**â‘¡ è¡¨å•éªŒè¯é€šè¿‡**


![success.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/200b9221b3a7444b85b11a71276f7680~tplv-k3u1fbpfcp-watermark.image)

éªŒè¯æˆåŠŸï¼

**â‘¢ è·å–è¡¨å•çš„æ•°æ®å±‚**


![get.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a708afa9565b427ab545a7890d910e09~tplv-k3u1fbpfcp-watermark.image)

é€šè¿‡ getFieldsValue è·å–è¡¨å•æ•°æ®å±‚ã€‚

**â‘£ é‡ç½®è¡¨å•çš„æ•°æ®å±‚**


![reset.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d22e76ea1f0e4cde9ee2eb01013855f3~tplv-k3u1fbpfcp-watermark.image)

é€šè¿‡ resetFields é‡ç½®è¡¨å•ã€‚

**â‘¤ åŠ¨æ€æ·»åŠ è¡¨å•éªŒè¯è§„åˆ™**


![dongtai.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/14e6d60035764c06b66a9eb877d5b1e8~tplv-k3u1fbpfcp-watermark.image)

é€šè¿‡ setFieldsValue åŠ¨æ€è®¾ç½®è§„åˆ™ã€‚

ä¹‹å‰è§„åˆ™å’Œæç¤ºæ–‡æ¡ˆ `{ rule: (value='') => value.length < 5   ,message:'ç®€ä»‹ä¸è¶…è¿‡äº”ä¸ªå­—ç¬¦'  }` 

åŠ¨æ€è®¾ç½®è§„åˆ™ `{ rule: (value='') => value.length < 10, message:'ç®€ä»‹ä¸è¶…è¿‡åä¸ªå­—ç¬¦' } `


## å…­ æ€»ç»“

ä»¥ä¸Šå°±æ˜¯ä» 0 åˆ° 1 è®¾è®¡çš„è¡¨å•éªŒè¯ç³»ç»Ÿï¼Œå¸Œæœ›è¯»è€…èƒ½å¤Ÿå¯¹ç€é¡¹ç›® demo æ•²ä¸€éï¼Œåœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç›¸ä¿¡ä¼šæœ‰å¾ˆå¤šæ”¶è·ã€‚