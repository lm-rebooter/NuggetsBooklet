> æŠ€æœ¯è¦ç‚¹ï¼šNpm

### å‰è¨€

å› ä¸ºå›½å†…ç½‘ç»œç¯å¢ƒçš„åŸå› ï¼Œæ‰§è¡Œ`npm i`å®‰è£…ä¾èµ–æ—¶ï¼Œè‚¯å®šä¼šé‡åˆ°`å®‰è£…è¿‡æ…¢`æˆ–`å®‰è£…å¤±è´¥`çš„æƒ…å†µã€‚æœ‰ç»éªŒçš„åŒå­¦é€šå¸¸ä¼šåœ¨`Node`å®‰è£…å®Œæ¯•é¡ºä¾¿æŠŠ`Npmé•œåƒ`è®¾ç½®ä¸ºå›½å†…çš„æ·˜å®é•œåƒã€‚

```bash
npm config set registry https://registry.npmmirror.com/
```

è¿™æ ·å°±èƒ½åº”ä»˜å¾ˆå¤š`npm i`çš„å®‰è£…æƒ…å†µã€‚å½“ç„¶è¿™åªæ˜¯è§£å†³å¾ˆå¤š`å®‰è£…è¿‡æ…¢`æˆ–`å®‰è£…å¤±è´¥`çš„æƒ…å†µï¼Œéšç€é¡¹ç›®çš„æ·±å…¥å¼€å‘ï¼Œè‚¯å®šè¿˜ä¼šé‡åˆ°ä¸€äº›æ›´å¥‡è‘©çš„æƒ…å†µã€‚æœ¬ç« å°†å¸¦é¢†ä½ **å¡«åŸ‹Npmé•œåƒé‚£äº›é™©è±¡ç¯ç”Ÿçš„å‘**ï¼Œé€šè¿‡å¤šæ–¹é¢æ¢è®¨`Npmé•œåƒ`é—®é¢˜ï¼Œå…¨æ–¹ä½è§£å†³`å®‰è£…è¿‡æ…¢`æˆ–`å®‰è£…å¤±è´¥`ï¼Œä½¿`npm i`å®‰è£…ä¾èµ–æ—¶æ›´é¡ºç•…ã€‚

### èƒŒæ™¯ï¼šå¦‚ä½•ä¼˜é›…åˆ‡æ¢Npmé•œåƒ

è‹¥å¼€æºä¸€ä¸ª`Npmæ¨¡å—`ï¼Œåœ¨å¼€å‘æ—¶ä½¿ç”¨æ·˜å®é•œåƒï¼Œä½†å‘å¸ƒæ—¶å¿…é¡»ä½¿ç”¨åŸé•œåƒã€‚åœ¨ç€æ‰‹è§£å†³ä¸Šè¿°é—®é¢˜å‰ï¼Œå…ˆæ¨èä¸€ä¸ª**é•œåƒç®¡ç†å·¥å…·**ã€‚

- **åŸé•œåƒ**ï¼š`https://registry.npmjs.org/`
- **æ·˜å®é•œåƒ**ï¼š`https://registry.npmmirror.com/`

##### ç®¡ç†é•œåƒ

ä¸»è§’å°±æ˜¯`nrm`ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯éšæ—¶éšåœ°è‡ªç”±åˆ‡æ¢`Npmé•œåƒ`çš„ç®¡ç†å·¥å…·ã€‚æ‰“å¼€`CMDå·¥å…·`ï¼Œæ‰§è¡Œ`npm i -g nrm`å®‰è£…`nrm`ï¼Œå†æ‰§è¡Œ`nrm -V`ï¼Œè¾“å‡ºç‰ˆæœ¬è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚

æœ‰äº†å®ƒï¼Œä¸Šè¿°ä½•æ—¶ä½¿ç”¨ä½•ç§é•œåƒçš„é—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚åªéœ€æŒæ¡ä»¥ä¸‹å‘½ä»¤å°±èƒ½æ“ä½œ`nrm`ã€‚

å‘½ä»¤|åŠŸèƒ½
:-:|:-:
`nrm add <name> <url>`|æ–°å¢é•œåƒ
`nrm del <name>`|åˆ é™¤é•œåƒ
`nrm test <name>`|æµ‹è¯•é•œåƒ
`nrm use <name>`|åˆ‡æ¢é•œåƒ
`nrm current`|æŸ¥çœ‹é•œåƒ
`nrm ls`|æŸ¥çœ‹é•œåƒåˆ—è¡¨

ç†Ÿæ‚‰å‘½ä»¤åæ¥ä¸€æ³¢æ“ä½œï¼ŒåŸé•œåƒä¸æ·˜å®é•œåƒéšæ„åˆ‡æ¢ã€‚å½“ç„¶è®°æ€§å¥½ä¹Ÿæ— éœ€è¯¥å·¥å…·ã€‚

![nrm](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86824f448663448dbc122a22f8b03a9d~tplv-k3u1fbpfcp-watermark.image)

##### é‡å‘å¡«å‘

æœ‰äº†`nrm`åˆ‡æ¢åˆ°æ·˜å®é•œåƒï¼Œå®‰è£…é€Ÿåº¦æ˜æ˜¾åŠ å¿«ï¼Œä½†é‡åˆ°å®‰è£…çš„`Npmæ¨¡å—`ä¾èµ–äº†`C++æ¨¡å—`é‚£å°±å‘çˆ¹äº†ã€‚åœ¨å®‰è£…æ—¶ä¼šéšå¼å®‰è£…`node-gyp`ï¼Œ`node-gyp`å¯ç¼–è¯‘è¿™äº›ä¾èµ–`C++æ¨¡å—`çš„`Npmæ¨¡å—`ã€‚

é‚£é—®é¢˜æ¥äº†ï¼Œ`node-gyp`åœ¨é¦–æ¬¡ç¼–è¯‘æ—¶ä¼šä¾èµ–`Nodeæºç `ï¼Œæ‰€ä»¥åˆæ‚„æ‚„å»ä¸‹è½½`Node`ã€‚è™½ç„¶åœ¨å®‰è£…ä¾èµ–æ—¶å·²åˆ‡æ¢åˆ°æ·˜å®é•œåƒï¼Œä½†ä¸€ç‚¹åµç”¨éƒ½å†‡ã€‚è¿™æ ·åˆå› ä¸ºå›½å†…ç½‘ç»œç¯å¢ƒçš„åŸå› ï¼Œå†æ¬¡é‡åˆ°`å®‰è£…è¿‡æ…¢`æˆ–`å®‰è£…å¤±è´¥`çš„æƒ…å†µã€‚æ„Ÿè§‰æ˜¯æ­»å¾ªç¯å•Šï¼

è¿˜å¥½`npm config`æä¾›ä¸€ä¸ªå‚æ•°`disturl`ï¼Œå®ƒå¯è®¾ç½®`Nodeé•œåƒåœ°å€`ï¼Œå½“ç„¶è¿˜æ˜¯å°†å…¶æŒ‡å‘å›½å†…çš„æ·˜å®é•œåƒã€‚è¿™æ ·åˆèƒ½æ„‰å¿«åœ°å®‰è£…è¿™äº›ä¾èµ–`C++æ¨¡å—`çš„`Npmæ¨¡å—`äº†ã€‚

```bash
npm config set disturl https://npm.taobao.org/mirrors/node/
```

é—®é¢˜ä¸€æ­¥ä¸€æ­¥åœ°è§£å†³ï¼Œæ¥ç€åˆå‡ºç°å¦ä¸€ä¸ªé—®é¢˜ã€‚å¹³å¸¸éƒ½ä¼šä½¿ç”¨`node-sass`ä½œä¸ºå¼€å‘ä¾èµ–ï¼Œä½†`node-sass`çš„å®‰è£…ä¸€ç›´éƒ½æ˜¯ä¸€ä¸ªè®©äººå¤´ç–¼çš„é—®é¢˜ã€‚

å®‰è£…`node-sass`æ—¶ï¼Œåœ¨`installé˜¶æ®µ`ä¼šä»`Github Releases`ä¸­ä¸‹è½½ä¸€ä¸ªå«`binding.node`çš„æ–‡ä»¶ï¼Œè€Œ`Github Releases`ä¸­çš„æ–‡ä»¶éƒ½æ‰˜ç®¡åœ¨`s3.amazonaws.com`ä¸­ï¼Œè¯¥ç½‘å€è¢«Qäº†ï¼Œæ‰€ä»¥åˆå®‰è£…ä¸äº†ã€‚

ç„¶è€ŒåŠæ³•æ€»æ¯”å›°éš¾å¤šï¼Œä»`node-sass`çš„å®˜æ–¹æ–‡æ¡£ä¸­å¯æ‰¾åˆ°ä¸€ä¸ªå«`sass_binary_site`çš„å‚æ•°ï¼Œå®ƒå¯è®¾ç½®`Sassé•œåƒåœ°å€`ï¼Œæ¯«æ— ç–‘é—®è¿˜æ˜¯å°†å…¶æŒ‡å‘å›½å†…çš„æ·˜å®é•œåƒã€‚è¿™æ ·åˆèƒ½æ„‰å¿«åœ°å®‰è£…`node-sass`äº†ã€‚

```bash
npm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/
```

å…¶å®è¿˜æœ‰å¥½å‡ ä¸ªç±»ä¼¼çš„æ¨¡å—ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘è¿˜æ˜¯æŠŠå®ƒä»¬æºç ä¸­çš„é•œåƒå‚æ•°åœ°å€æ‰’å‡ºæ¥ï¼Œç»Ÿä¸€è®¾ç½®æ–¹ä¾¿å®‰è£…ã€‚å®ƒä»¬åˆ†åˆ«æ˜¯`electron`ã€`phantom`ã€`puppeteer`ã€`python`ã€`sass`ã€`sentry`ã€`sharp`å’Œ`sqlite`ã€‚

> é…ç½®é•œåƒåœ°å€

`npm config set <name> <url>`ï¼Œèµ¶ç´§**ä¸€é”®å¤åˆ¶ï¼Œæ°¸ä¹…ä½¿ç”¨**ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œåˆ«æ¼äº†æœ€åçš„`/`ã€‚

```bash
npm config set electron_mirror https://npm.taobao.org/mirrors/electron/
npm config set phantomjs_cdnurl https://npm.taobao.org/mirrors/phantomjs/
npm config set puppeteer_download_host https://npm.taobao.org/mirrors/
npm config set python_mirror https://npm.taobao.org/mirrors/python/
npm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/
npm config set sentrycli_cdnurl https://npm.taobao.org/mirrors/sentry-cli/
npm config set sharp_binary_host https://npm.taobao.org/mirrors/sharp/
npm config set sharp_dist_base_url https://npm.taobao.org/mirrors/sharp-libvips/
npm config set sharp_libvips_binary_host https://npm.taobao.org/mirrors/sharp-libvips/
npm config set sqlite3_binary_site https://npm.taobao.org/mirrors/sqlite3/
```

æœ‰äº†è¿™æ³¢æ“ä½œï¼Œæ‰§è¡Œ`npm i`å®‰è£…ä¸Šè¿°`Npmæ¨¡å—`å°±èƒ½äº«å—å›½å†…é€Ÿåº¦äº†ã€‚è‹¥æœ‰æ¡ä»¶ï¼Œå»ºè®®æŠŠè¿™äº›é•œåƒæ–‡ä»¶æ¬åˆ°è‡ªå·±æˆ–å…¬å¸çš„æœåŠ¡å™¨ä¸­ï¼Œå°†é•œåƒåœ°å€æŒ‡å‘è‡ªæœ‰çš„æœåŠ¡å™¨ã€‚åœ¨å…¬å¸å†…ç½‘æ­å»ºä¸€ä¸ªè¿™æ ·çš„é•œåƒæœåŠ¡å™¨ï¼Œä¸€ç›´å®‰è£…ä¸€ç›´çˆ½ã€‚

```bash
npm config set electron_mirror https://mirror.yangzw.vip/electron/
```

### åˆ†æï¼šé€šè¿‡node-sassæ¢ç©¶é•œåƒé…ç½®

##### æºç 

ä»¥ç»å¸¸å¡ä½çš„`node-sass`ä¸ºä¾‹ï¼Œä»¥ä¸‹æ˜¯å‘çˆ¹è´§`node-sass/lib/extensions.js`çš„[æºç éƒ¨åˆ†](https://github.com/sass/node-sass/blob/master/lib/extensions.js#L242)ï¼Œå¯çœ‹å‡ºå®ƒä¼šé»˜è®¤èµ°`Github Releases`çš„æ‰˜ç®¡åœ°å€ï¼Œä¸Šè¿°ä¹Ÿåˆ†æè¿‡åŸå› ï¼Œåœ¨æ­¤å°±ä¸é‡å¤äº†ã€‚

```txt
æºç éƒ¨åˆ†éšç€ç‰ˆæœ¬æ›´æ–°å¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–ï¼Œä½†å¤§æ¦‚çš„é€»è¾‘å·®ä¸å¤šä¸€æ ·ã€‚
```

```js
function getBinaryUrl() {
	const site = getArgument("--sass-binary-site")
		|| process.env.SASS_BINARY_SITE
		|| process.env.npm_config_sass_binary_site
		|| (pkg.nodeSassConfig && pkg.nodeSassConfig.binarySite)
		|| "https://github.com/sass/node-sass/releases/download";
	const result = [site, "v" + pkg.version, getBinaryName()].join("/");
	return result;
}
```

è€Œå…¶ä»–`Npmæ¨¡å—`ä¹Ÿæœ‰ç±»ä¼¼çš„ä»£ç ï¼Œä¾‹å¦‚`puppeteer`å®‰è£…`Chronium`çš„[æºç éƒ¨åˆ†](https://github.com/puppeteer/puppeteer/blob/master/install.js#L29)ï¼Œæœ‰å…´è¶£çš„åŒå­¦å»æ‰’ä¸‹æºç ï¼Œå¦‚å‡ºä¸€è¾™ã€‚

```txt
æºç éƒ¨åˆ†éšç€ç‰ˆæœ¬æ›´æ–°å¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–ï¼Œä½†å¤§æ¦‚çš„é€»è¾‘å·®ä¸å¤šä¸€æ ·ã€‚
```

```js
async function download() {
	await compileTypeScriptIfRequired();
	const downloadHost =
		process.env.PUPPETEER_DOWNLOAD_HOST
		|| process.env.npm_config_puppeteer_download_host
		|| process.env.npm_package_config_puppeteer_download_host;
	const puppeteer = require("./index");
	const product =
		process.env.PUPPETEER_PRODUCT
		|| process.env.npm_config_puppeteer_product
		|| process.env.npm_package_config_puppeteer_product
		|| "chrome";
	const browserFetcher = puppeteer.createBrowserFetcher({
		product,
		host: downloadHost,
	});
	const revision = await getRevision();
	await fetchBinary(revision);
	// è¿˜æœ‰å¾ˆå¤š
}
```

##### åŸå› 

å› ä¸º`node-sass`æ˜¯ç»å¸¸ä½¿ç”¨çš„å¼€å‘ä¾èµ–ï¼Œä¹Ÿæ˜¯å®‰è£…æ—¶é—´è¾ƒé•¿ä¸æœ€å¸¸è§åˆ°æŠ¥é”™çš„`Npmæ¨¡å—`ï¼Œåœ¨æ­¤å°±èŠ±ç‚¹ç¯‡å¹…åˆ†æä¸è§£å†³å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ã€‚

`node-sass`å®‰è£…å¤±è´¥çš„åŸå› å…¶å®å¹¶ä¸æ­¢ä¸Šè¿°æåˆ°çš„æƒ…å†µï¼Œå¯ä»å®‰è£…æ—¶åˆ†æå¹¶è·å–çªç ´å£è§£å†³é—®é¢˜ã€‚åˆ†æ`npm i node-sass`è¾“å‡ºä¿¡æ¯å¯å¾—åˆ°ä»¥ä¸‹è¿‡ç¨‹ã€‚

- æ£€æµ‹é¡¹ç›®`node_modules`æ–‡ä»¶å¤¹çš„`node-sass`æ˜¯å¦å­˜åœ¨ä¸”å½“å‰å®‰è£…ç‰ˆæœ¬æ˜¯å¦ä¸€æ ·
	- **Yes**ï¼šè·³è¿‡ï¼Œå®Œæˆå®‰è£…è¿‡ç¨‹
	- **No**ï¼šè¿›å…¥ä¸‹ä¸€æ­¥
- ä»`Npmå…¬æœ‰ä»“åº“`ä¸­ä¸‹è½½`node-sass`
- æ£€æµ‹`å…¨å±€ç¼“å­˜`æˆ–`é¡¹ç›®ç¼“å­˜`ä¸­æ˜¯å¦å­˜åœ¨`binding.node`æ–‡ä»¶
	- **Yes**ï¼šè·³è¿‡ï¼Œå®Œæˆå®‰è£…è¿‡ç¨‹
	- **No**ï¼šè¿›å…¥ä¸‹ä¸€æ­¥
- ä»`Github Releases`ä¸­ä¸‹è½½`binding.node`æ–‡ä»¶å¹¶å°†å…¶ç¼“å­˜åˆ°å…¨å±€
	- **Success**ï¼šå°†ç‰ˆæœ¬ä¿¡æ¯å†™å…¥`package-lock.json`
	- **Error**ï¼šè¿›å…¥ä¸‹ä¸€æ­¥
- å°è¯•æœ¬åœ°ç¼–è¯‘å‡º`binding.node`æ–‡ä»¶
	- **Success**ï¼šå°†ç‰ˆæœ¬ä¿¡æ¯å†™å…¥`package-lock.json`
	- **Error**ï¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯

ä¸éš¾çœ‹å‡ºï¼Œ`node-sass`ä¾èµ–äº†ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶`binding.node`ï¼Œä¸ä»…éœ€ä»`Npmå…¬æœ‰ä»“åº“`ä¸­ä¸‹è½½æœ¬ä½“è¿˜éœ€ä»`Github Releases`ä¸­ä¸‹è½½`binding.node`æ–‡ä»¶ã€‚

ä»å®é™…æƒ…å†µæ¥çœ‹ï¼Œ`node-sass`å‡ºç°`å®‰è£…è¿‡æ…¢`æˆ–`å®‰è£…å¤±è´¥`çš„æƒ…å†µå¯èƒ½å­˜åœ¨ä»¥ä¸‹åŸå› ã€‚

> Npmé•œåƒæ‰˜ç®¡åœ¨å›½å¤–æœåŠ¡å™¨

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è§£å†³ã€‚

```bash
nrm use taobao
```

> å®‰è£…æ—¶æ‚„æ‚„ä¸‹è½½`node-gyp`

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è§£å†³ã€‚

```bash
npm config set disturl https://npm.taobao.org/mirrors/node/
```

> `binding.node`æ–‡ä»¶æ‰˜ç®¡åœ¨å›½å¤–æœåŠ¡å™¨

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è§£å†³ã€‚

```bash
npm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/
```

> `node-sassç‰ˆæœ¬`ä¸`Nodeç‰ˆæœ¬`ä¸å…¼å®¹

`node-sassç‰ˆæœ¬`å…¼å®¹æ€§å¥½å·®ï¼Œå¿…é¡»ä¸`Nodeç‰ˆæœ¬`å¯¹åº”ä½¿ç”¨æ‰è¡Œï¼Œå¯æŸ¥çœ‹[node-sass-version-association](https://github.com/sass/node-sass#node-sass)ï¼Œå¤ç”¨å®˜æ–¹æ–‡æ¡£çš„ç‰ˆæœ¬å¯¹ç…§è¡¨ã€‚

NodeJS|Supported node-sass version|Node Module
:-:|:-:|:-:
**Node17**|`7.0+`|`102`
**Node16**|`6.0+`|`93`
**Node15**|`5.0+,<7.0`|`88`
**Node14**|`4.14+`|`83`
**Node13**|`4.13+,<5.0`|`79`
**Node12**|`4.12+`|`72`
**Node11**|`4.10+,<5.0`|`67`
**Node10**|`4.9+,<6.0`|`64`
**Node8**|`4.5.3+,<5.0`|`57`
**Node<8**|`<5.0`|`<57`

æ‰§è¡Œ`npm i`å®‰è£…ä¾èµ–å‰è¯·ç¡®ä¿å½“å‰çš„`node-sassç‰ˆæœ¬`ä¸`Nodeç‰ˆæœ¬`å·²å…¼å®¹ã€‚

> å…¨å±€ç¼“å­˜ä¸­çš„`binding.nodeç‰ˆæœ¬`ä¸`Nodeç‰ˆæœ¬`ä¸å…¼å®¹

è‹¥`æœ¬åœ°ç¯å¢ƒ`ä½¿ç”¨`Nvm`ç®¡ç†`Nodeç‰ˆæœ¬`ä¸”å·²åˆ‡æ¢äº†`Nodeç‰ˆæœ¬`ï¼Œåœ¨å®‰è£…æ—¶å¯èƒ½ä¼šå‡ºç°`Windows/OS X/Linux 64-bit with Node.js 16.x`è¿™æ ·çš„æç¤ºï¼Œè¿™ç§æƒ…å†µä¹Ÿæ˜¯æˆ‘ç»å¸¸é‡åˆ°çš„ã€‚

```txt
æˆ‘ç”µè„‘å®‰è£…äº†30å¤šä¸ªNodeç‰ˆæœ¬ä¸”ç»å¸¸æ¥å›åˆ‡æ¢ã€‚
```

ä»ä¸Šè¿°è¡¨æ ¼å¯çŸ¥`node-sassç‰ˆæœ¬`ä¸`Nodeç‰ˆæœ¬`æ˜¯å…³è”çš„ï¼Œä¿®æ”¹`Nodeç‰ˆæœ¬`ååœ¨å…¨å±€ç¼“å­˜ä¸­åŒ¹é…ä¸åˆ°å¯¹åº”`binding.node`æ–‡ä»¶è€Œå¯¼è‡´å®‰è£…å¤±è´¥ã€‚æ ¹æ®é”™è¯¯æç¤ºï¼Œæ¸…ç†`Npmç¼“å­˜`å†é‡æ–°å®‰è£…ã€‚

```bash
npm cache clean -f
npm rebuild node-sass
```

æ‰€ä»¥æ²¡äº‹å°±åˆ«æ¥å›åˆ‡æ¢`Nodeç‰ˆæœ¬`ï¼Œåƒæˆ‘è£…è¿™ä¹ˆå¤š`Nodeç‰ˆæœ¬`ä¹Ÿæ˜¯è¿«ä¸å¾—å·²ï¼Œè€é¡¹ç›®å¤ªå¤šäº†ğŸ˜‚ã€‚

> å®‰è£…å¤±è´¥åé‡æ–°å®‰è£…

æœ‰å¯èƒ½æ— æƒé™å¸è½½å·²å®‰è£…çš„å†…å®¹ï¼Œå¯¼è‡´é‡æ–°å®‰è£…æ—¶å¯èƒ½äº§ç”ŸæŸäº›é—®é¢˜ï¼Œå»ºè®®å°†`node_modules`æ–‡ä»¶å¤¹å…¨éƒ¨å¸è½½å¹¶é‡æ–°å®‰è£…ã€‚

åœ¨`MacOSç³»ç»Ÿ`ä¸­å¸è½½`node_modules`æ–‡ä»¶å¤¹è¾ƒå¿«ï¼Œä½†åœ¨`Windowsç³»ç»Ÿ`ä¸­å¸è½½`node_modules`æ–‡ä»¶å¤¹è¾ƒæ…¢ï¼Œæ¨èä½¿ç”¨[rimraf](https://github.com/isaacs/rimraf)å¸è½½`node_modules`æ–‡ä»¶å¤¹ï¼Œå®ƒæ˜¯ä¸€ä¸ª`Node`çš„`rm -rf`å·¥å…·ã€‚

```bash
npm i -g rimraf
```

åœ¨`package.json`ä¸­æŒ‡å®š`scripts`ï¼Œè®©`rimraf`å¸¸é©»ï¼Œä¸‰å¤§æ“ä½œç³»ç»Ÿé€šç”¨ã€‚

```json
{
	"scripts": {
		"reset": "rimraf node_modules package-lock.json yarn.lock && npm i"
	}
}
```

æœ‰`å®‰è£…å¤±è´¥`ä¸`é‡æ–°å®‰è£…`ç›¸å…³æ“ä½œï¼Œæ‰§è¡Œ`npm run reset`ã€‚

### æ–¹æ¡ˆï¼šå¡«åŸ‹Npmé•œåƒé‚£äº›é™©è±¡ç¯ç”Ÿçš„å‘

è‹¥çœ‹å¾—æœ‰ç‚¹ä¹±ï¼Œé‚£ç›´æ¥è´´å‡ºå‘½ä»¤æ‰§è¡Œé¡ºåºï¼Œå»ºè®®å‰ç«¯å°ç™½åœ¨`Node`å®‰è£…å®Œæ¯•ç«‹å³å¤„ç†è¿™äº›é•œåƒé—®é¢˜ï¼Œé˜²æ­¢åç»­äº§ç”Ÿä¸å¿…è¦çš„éº»çƒ¦ã€‚

```bash
# æŸ¥çœ‹Nodeç‰ˆæœ¬ä¸Npmç‰ˆæœ¬ï¼Œç¡®è®¤å·²å®‰è£…Nodeç¯å¢ƒ
node -v
npm -v

# å…¨å±€å®‰è£…nrmå¹¶è®¾ç½®Npmé•œåƒä¸ºæ·˜å®é•œåƒ
npm i -g nrm
nrm use taobao

# è®¾ç½®ä¾èµ–åœ¨å®‰è£…æ—¶å†…éƒ¨æ¨¡å—ä¸‹è½½çš„Nodeé•œåƒä¸ºæ·˜å®é•œåƒ
npm config set disturl https://registry.npmmirror.com/node/

# è®¾ç½®å¸¸è§Npmæ¨¡å—çš„æ·˜å®é•œåƒ
npm config set electron_mirror https://npm.taobao.org/mirrors/electron/
npm config set phantomjs_cdnurl https://npm.taobao.org/mirrors/phantomjs/
npm config set puppeteer_download_host https://npm.taobao.org/mirrors/
npm config set python_mirror https://npm.taobao.org/mirrors/python/
npm config set sass_binary_site https://npm.taobao.org/mirrors/node-sass/
npm config set sentrycli_cdnurl https://npm.taobao.org/mirrors/sentry-cli/
npm config set sharp_binary_host https://npm.taobao.org/mirrors/sharp/
npm config set sharp_dist_base_url https://npm.taobao.org/mirrors/sharp-libvips/
npm config set sharp_libvips_binary_host https://npm.taobao.org/mirrors/sharp-libvips/
npm config set sqlite3_binary_site https://npm.taobao.org/mirrors/sqlite3/
```

é’ˆå¯¹`node-sass`çš„æƒ…å†µã€‚

```bash
# å…¨å±€å®‰è£…rimraf
npm i -g rimraf

# å®‰è£…å‰è¯·ç¡®ä¿node-sassç‰ˆæœ¬ä¸å½“å‰Nodeç‰ˆæœ¬å·²å…¼å®¹

# å®‰è£…å¤±è´¥
npm cache clean -f
npm rebuild node-sass
# æˆ– npm run reinstall
```

åœ¨`package.json`ä¸­æŒ‡å®š`scripts`ã€‚

```json
{
	"scripts": {
		"reset": "rimraf node_modules package-lock.json yarn.lock && npm i"
	}
}
```

### æ€»ç»“

ä¸Šè¿°å…³äºé•œåƒçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åœ¨`æœ¬åœ°ç¯å¢ƒ`ä¸­éƒ¨ç½²ï¼Œè¿˜éœ€å°†å…¶åœ¨`æœåŠ¡å™¨ç¯å¢ƒ`ä¸­éƒ¨ç½²ä¸€æ¬¡ã€‚

é•œåƒé—®é¢˜çš„å‘ç¡®å®å¾ˆå¤šï¼Œå½’æ ¹åˆ°åº•è¿˜æ˜¯ç½‘ç»œç¯å¢ƒå¯¼è‡´çš„ã€‚å½“ç„¶è¿™äº›é—®é¢˜ä¹Ÿé˜»ç¢ä¸äº†ä¹äºæ¢ç´¢çš„ä½ ï¼ŒåŠæ³•æ€»æ¯”å›°éš¾å¤šï¼ŒåšæŒä¸‹å»å§‹ç»ˆèƒ½æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚

æˆ‘æ€»ç»“å‡ºä¸€ä¸ªè§£å†³é•œåƒé—®é¢˜çš„å¥½æ–¹å¼ï¼Œé‡åˆ°ä¸€äº›ä¸Šè¿°æœªæåˆ°çš„`Npmæ¨¡å—`ï¼Œå¯å°è¯•é€šè¿‡ä»¥ä¸‹æ­¥éª¤è§£å†³é—®é¢˜ã€‚

- æ‰§è¡Œ`npm i`å‰è®¾ç½®æ·˜å®é•œåƒï¼Œä¿è¯å®‰è£…ä¾èµ–æ—¶éƒ½èµ°å›½å†…ç½‘ç»œ
- å®‰è£…ä¸æˆåŠŸæ—¶ï¼Œè‚¯å®šæ˜¯åœ¨å®‰è£…æ—¶è¯¥æ¨¡å—å†…éƒ¨åˆå»ä¸‹è½½äº†å…¶ä»–å›½å¤–æœåŠ¡å™¨çš„æ–‡ä»¶
- åœ¨`Github`ä¸­å…‹éš†ä¸€ä»½è¯¥æ¨¡å—çš„æºç å¹¶åˆ†æä¸‹è½½é€»è¾‘ï¼Œæœç´¢åŒ…æ‹¬`baseã€binaryã€cdnã€configã€distã€downloadã€hostã€mirrorã€npmã€siteã€url`ç­‰ç›¸å…³å…³é”®è¯(é€šå¸¸**mirror**çš„åŒ¹é…åº¦æœ€é«˜)
- åœ¨æœæŸ¥ç»“æœä¸­æŸ¥æ‰¾å½¢æ€åƒé•œåƒåœ°å€çš„ä»£ç å—ï¼Œå†åˆ†æè¯¥ä»£ç å—çš„åŠŸèƒ½å¹¶æå–æœ€ç»ˆçš„é•œåƒåœ°å€ï¼Œä¾‹å¦‚`node-sass`çš„`sass_binary_site`
- å»æ·˜å®é•œåƒå®˜ç½‘ã€ç™¾åº¦ã€è°·æ­Œç­‰ç½‘ç«™æŸ¥æ‰¾æ‰€éœ€é•œåƒåœ°å€ï¼Œè‹¥å®åœ¨æ‰¾ä¸åˆ°å°±è§„èŒƒä¸Šç½‘æŠŠå›½å¤–æœåŠ¡å™¨çš„é•œåƒæ–‡ä»¶æ‹‰ä¸‹æ¥æ¬åˆ°è‡ªå·±æˆ–å…¬å¸çš„æœåŠ¡å™¨ä¸­
- è®¾ç½®æ¨¡å—ä¾èµ–çš„é•œåƒåœ°å€ï¼š`npm config set <name> <url>`
- é‡æ–°æ‰§è¡Œ`npm i`å®‰è£…ä¾èµ–

æœ¬ç« å†…å®¹åˆ°æ­¤ä¸ºæ­¢ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¯å‘ï¼Œæ¬¢è¿ä½ æŠŠè‡ªå·±çš„å­¦ä¹ å¿ƒå¾—æ‰“åˆ°è¯„è®ºåŒºï¼

- [x] ç¤ºä¾‹é¡¹ç›®ï¼š[fe-engineering](https://github.com/JowayYoung/fe-engineering)
- [x] æ­£å¼é¡¹ç›®ï¼š[bruce](https://github.com/JowayYoung/bruce)