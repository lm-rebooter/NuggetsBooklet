## åŸºç¡€å»ºè®¾å¾ˆé‡è¦

é¦–é¡µä½œä¸ºæˆ‘ä»¬æ•´ä¸ªåº”ç”¨ç¨‹åºçš„é—¨é¢æ‹…å½“ï¼Œå®ƒæ˜¯ç”¨æˆ·æ‰“å¼€åº”ç”¨ç¨‹åºä¹‹åï¼Œç¬¬ä¸€çœ¼ç›´è§‚çœ‹åˆ°çš„ä¸œè¥¿ï¼Œåšå¾—å¤æ‚å¤šæ ·ã€èŠ±é‡Œèƒ¡å“¨çš„ä¼šç»™ç”¨æˆ·é€ æˆä¸€å®šçš„è§†è§‰éšœç¢ï¼Œæˆ‘ä»¬æŠ“ä½æ•´ä¸ªåº”ç”¨çš„æ ¸å¿ƒç‚¹ï¼š**ç®€æ´ã€è½»å·§**ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬çš„æ•ˆæœå›¾ï¼Œæ¥ä¸‹æ¥è·Ÿç€é˜¿å®½ä¸€åŒå¼€å‘é¦–é¡µæ•ˆæœå§ï½

> æœ¬ç« èŠ‚å°†ä¸€æ­¥æ­¥å¸¦ä½ å¼€å‘é¦–é¡µåŠŸèƒ½ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›è¿‡ç¨‹ï¼Œä»ç®€å•ç²—æš´çš„åŠŸèƒ½å®ç°åˆ°æ€è€ƒæŠ½ç¦»ï¼Œå¦‚æœä½ å¯¹æœ¬ç« èŠ‚å†…å®¹å…´è¶£ä¸å¤§ï¼Œå¯ä»¥å¿«é€Ÿé˜…è¯»æˆ–è·³è¿‡ã€‚

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46929297f93c4b6a8fe8a3117e8ec3e4~tplv-k3u1fbpfcp-watermark.image)

### è·¯ç”±ç»„ä»¶å¼€å‘

æˆ‘ä»¬è¿›å…¥åˆ° `app/renderer` æ–‡ä»¶å¤¹ä¸‹ï¼Œä¼šå‘ç°è¿™é‡Œæœ‰æ­å»ºç¯å¢ƒæ—¶å†™çš„ `<Title />` ç»„ä»¶ï¼Œæˆ‘ä»¬å°†å…¶è¿›è¡Œåˆ é™¤ï¼ˆå·²æ— ç”¨ï¼‰ï¼Œæˆ‘ä»¬ç”¨è„šè¶¾å¤´éƒ½èƒ½çŸ¥é“ï¼Œä¹‹åä¼šå­˜åœ¨è¯¸å¤šæ¨¡å—å…¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ renderer ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªè·¯ç”±æ–‡ä»¶ `router.tsx`ï¼Œç®¡ç†æ‰€æœ‰çš„æ¨¡å—å…¥å£ï¼Œå…ˆæ¥ç¼–å†™ä¸€ä¸‹ router.tsx

```ts
// renderer/router.tsx
import React from 'react';
import { HashRouter, Route, Switch, Redirect } from 'react-router-dom';
import Root from './container/root';

function Router() {
  return (
    <HashRouter>
      <Switch>
        {/* ğŸ‘‡ ä¸€å®šè¦æ·»åŠ  exact */}
        <Route path="/" exact>
          <Root />
        </Route>
      </Switch>
      {/* é‡å®šå‘åˆ°é¦–é¡µ */}
      <Redirect to="/" />
    </HashRouter>
  );
}
export default Router;
```

çœ¼ç²¾çš„å°ä¼™ä¼´å·²ç»å‘ç°ï¼Œä¸Šé¢æˆ‘ä»¬å¼•å…¥äº† `import Root from './container/root'`ï¼Œè²Œä¼¼æˆ‘ä»¬ç°åœ¨è¿˜æ²¡æœ‰è¿™ä¸ªç»„ä»¶ï¼Œæˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸‹å®ƒã€‚

åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ `container`ï¼Œè¯¥æ–‡ä»¶å¤¹å­˜æ”¾ç€æ‰€æœ‰æ¨¡å—çš„ä»£ç æ–‡ä»¶ï¼Œæ­¤æ—¶æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œå–åä¸ºï¼š`root`ï¼Œè¡¨æ˜è¿™æ˜¯é¦–é¡µæ¨¡å—ï¼Œå¹¶åˆ›å»ºå…¥å£æ–‡ä»¶ index.tsx å’Œ index.less

```ts
// renderer/container/root/index.tsx
import React from 'react';
import './index.less';

function Root() {
  return <div>æˆ‘æ˜¯é¦–é¡µ</div>;
}
export default Root;
```

å›åˆ°æ ¹ç»„ä»¶ app.tsxï¼Œå°†è·¯ç”±ç»„ä»¶ router.tsx å¼•å…¥

```ts
// renderer/app.tsx
import React from 'react';
import ReactDOM from 'react-dom';
import Router from './router';
function App() {
  return <Router />;
}

ReactDOM.render(<App />, document.getElementById('root'));
```

å¤§åŠŸå‘Šæˆï¼Œè¿è¡Œä¸€ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•

```bash
npm run start:main
npm run start:render
```

ä¸å‡ºæ„å¤–ï¼Œæ¸²æŸ“è¿›ç¨‹çª—å£å¾ˆé¡ºåˆ©çš„å±•ç¤ºäº†æˆ‘ä»¬æƒ³è¦çš„é¡µé¢æ•ˆæœï¼Œæ­¤æ—¶çœ‹çœ‹æˆ‘ä»¬çš„æ–‡ä»¶ç»“æ„

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/512848882a5f402b8f7df8b4ef0a126a~tplv-k3u1fbpfcp-watermark.image)

### é¦–é¡µå¼€å‘

é€šè¿‡æ•ˆæœå›¾ï¼Œæˆ‘ä»¬å¯ä»¥å°†é¦–é¡µæ‹†åˆ†æˆï¼š

- logo å›¾ç‰‡
- title åº”ç”¨åç§°
- tips åº”ç”¨ç®€ä»‹ç‰¹æ€§
- entry æ¨¡å—å…¥å£
- copyright åº”ç”¨ç‰ˆæƒ

æ¥ä¸‹æ¥å°†ä»£ç å®ç°é¦–é¡µæ•ˆæœï¼Œå¯¹äºæ ·å¼ä»£ç ä¸ä¼šè´´å‡ºï¼Œå°ä¼™ä¼´ä»¬å¯ç§»æ­¥ github é˜…è¯»ï¼šğŸ‘‰ [chapter-06](https://github.com/PDKSophia/visResumeMook/tree/chapter-06)

æˆ‘ä»¬å…ˆå°†logoå›¾å¼•å…¥ï¼ˆå›¾ç‰‡å¯è‡ªè¡Œè·å–ï¼‰ï¼Œé€šè¿‡ CSS å®ç°å¸ƒå±€æ•ˆæœï¼ŒCSSéƒ¨åˆ†ä»£ç æ­¤å¤„å¿½ç•¥

```ts
// é¦–é¡µæ¨¡å—çš„å…¥å£æ–‡ä»¶
import React from 'react';
import './index.less';
import Logo from '../../../../assets/logo.png';

function Root() {
  return (
    <div styleName="root">
      <div styleName="container">
        <img src={Logo} alt="" />
        <div styleName="title">VisResumeMook</div>
        <div styleName="tips">ä¸€ä¸ªæ¨¡æ¿ç®€å†åˆ¶ä½œå¹³å°, è®©ä½ çš„ç®€å†æ›´åŠ å‡ºä¼— ~</div>
        <div styleName="action">
          {['ä»‹ç»', 'ç®€å†', 'æºç '].map((text, index) => {
            return (
              <div key={index} styleName="item">{text}</div>
            );
          })}
        </div>
        <div styleName="copyright">
          <div styleName="footer">
            <p styleName="copyright">
              Copyright Â© 2018-{new Date().getFullYear()} All Rights Reserved. Copyright By pengdaokuan
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}
export default Root;
```

åˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œå¯ä»¥å‘ç°æˆ‘ä»¬è·ç¦»æˆåŠŸåªå‰©ä¸€æ­¥ä¹‹é¥ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°ä¸€ä¸‹åŸºæœ¬ç‚¹å‡»è·³è½¬ç­‰åŠŸèƒ½ã€‚

### æ¨¡å—å…¥å£è·³è½¬åŠŸèƒ½

åœ¨ React ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ react-router è¿™ä¸ªå¼ºå¤§è·¯ç”±åº“è¿›è¡Œé¡µé¢ä¹‹é—´çš„è·³è½¬ï¼Œå®ƒå¯ä»¥è®©ä½ å‘åº”ç”¨ä¸­å¿«é€Ÿåœ°æ·»åŠ è§†å›¾å’Œæ•°æ®æµï¼ŒåŒæ—¶ä¿æŒé¡µé¢ä¸ URL é—´çš„åŒæ­¥ã€‚

åœ¨ç¯å¢ƒæ­å»ºç¯‡ä¸­æˆ‘ä»¬å·²ç»å®‰è£…äº† react-routerï¼Œç”±äºæˆ‘ä»¬é‡‡ç”¨ Hooks çš„å†™æ³•ï¼Œreact-router æä¾›äº†ä¸€ä¸ª API å«åš `useHistory`ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡å®ƒï¼Œæ¥å®ç°æˆ‘ä»¬çš„è·³è½¬åŠŸèƒ½å§ï½

å›åˆ°æˆ‘ä»¬ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ä¸ºå…¶æ·»åŠ ä¸€ä¸ª `onClick` äº‹ä»¶

```tsx
// é¦–é¡µæ¨¡å—çš„å…¥å£æ–‡ä»¶
import React from 'react';
import './index.less';
import { useHistory } from 'react-router';
import Logo from '../../../../assets/logo.png';

function Root() {
  // ğŸ‘‡ é€šè¿‡ history.push è¿›è¡Œè·³è½¬
  const history = useHistory();
  
  const onRouterToLink = (text: string) => {
     if (text === 'ç®€å†') {
       console.log('è·³è½¬åˆ°ç®€å†é¡µé¢')
       history.push('/resume')
     } else {
       console.log('è¿›å…¥åˆ° github ')
     }
  }

  return (
    <div styleName="root">
      ...
      <div styleName="action">
        {['ä»‹ç»', 'ç®€å†', 'æºç '].map((text, index) => {
          return (
            <div key={index} styleName="item" onClick={() => onRouterToLink(text)} >
              {text}
            </div>
          );
       )}
      </div>
      ...
    </div>
  );
}
export default Root;
```

è§£è¯»ä¸€ä¸‹ä¸Šé¢ä»£ç ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªæ¨¡å— div éƒ½æ·»åŠ  `onClick` äº‹ä»¶ï¼Œç‚¹å‡»æ¨¡å—åï¼Œè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œä»è€Œåšå¯¹åº”çš„æ“ä½œã€‚ åˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œç‚¹å‡»`ç®€å†` ï¼Œå‘ç°é¡µé¢ç©ºç™½ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå›è¿‡å¤´æƒ³æƒ³ï¼Œæˆ‘ä»¬ä¸Šè¾¹çš„ `router.tsx` è·¯ç”±ç»„ä»¶ï¼Œ**ä¸å°±åªå†™äº†ä¸€ä¸ªé¦–é¡µæ¨¡å—çš„è·¯ç”±å—**ï¼Ÿæˆ‘ä»¬å›å»æ·»åŠ ä¸€ä¸ªæ–°è·¯ç”±ã€‚

åœ¨ `container` ä¸‹æ·»åŠ  resume æ–‡ä»¶å¤¹ï¼Œå¹¶æ–°å¢å…¥å£ index.tsxï¼Œæˆ‘ä»¬ç®€å•å†™ä¸€ä¸‹ç®€å†å…¥å£ä»£ç ã€‚

```ts
import React from 'react';
import './index.less';

function Resume() {
  return <div>æˆ‘æ˜¯ç®€å†æ¨¡å—</div>;
}
export default Resume;
```

åŒæ—¶ä¿®æ”¹ router.tsx æ–‡ä»¶ï¼Œå°†å…¶å¼•å…¥

```ts
import React from 'react';
import { HashRouter, Route, Switch, Redirect } from 'react-router-dom';
import Root from './container/root';
import Resume from './container/resume';

function Router() {
  return (
    <HashRouter>
      <Switch>
        <Route path="/" exact>
          <Root />
        </Route>
        {/* ğŸ‘‡ æ·»åŠ ç®€å†æ¨¡å—å…¥å£è·¯ç”± */}
        <Route path="/resume" exact>
          <Resume />
        </Route>
      </Switch>
      <Redirect to="/" />
    </HashRouter>
  );
}
export default Router;
```

å†ç‚¹å‡»ä¸€ä¸‹ `ç®€å†`ï¼Œæ­¤æ—¶å¯æˆåŠŸè·³è½¬ã€‚é¡µé¢å†…çš„è·¯ç”±åˆ‡æ¢å°šèƒ½è§£å†³ï¼Œçª—å£å¤–çš„é¡µé¢è·³è½¬æ— ä»ä¸‹æ‰‹ã€‚æˆ‘ä»¬æœŸæœ›ç‚¹å‡»`ä»‹ç»`ã€`æºç `å¤„ï¼Œèƒ½å¤Ÿè„±ç¦»åº”ç”¨çª—å£ï¼Œåœ¨æˆ‘ä»¬é»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€é¡µé¢ï¼Œè¿›å…¥åˆ° github ä¸­ã€‚

**electron æä¾›ä¸€ä¸ª [shell](https://www.electronjs.org/docs/api/shell#shell) æ¨¡å—ï¼Œå®ƒæ¨¡å—æä¾›ä¸æ¡Œé¢é›†æˆç›¸å…³çš„åŠŸèƒ½**ã€‚å¹¶ä¸”æ­¤æ¨¡å—ä¹Ÿèƒ½ç”¨äºæ¸²æŸ“è¿›ç¨‹ä¸­ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡æ­¤æ¨¡å—ï¼Œå®ç°æ­¤åŠŸèƒ½ï¼ˆğŸ‘‡ éƒ¨åˆ†ä»£ç çœç•¥ï¼‰

```ts
import { shell } from 'electron';

function Root() {
   const onRouterToLink = (text: string) => {
    if (text !== 'ç®€å†') {
      // é€šè¿‡ shell æ¨¡å—ï¼Œæ‰“å¼€é»˜è®¤æµè§ˆå™¨ï¼Œè¿›å…¥ github
     shell.openExternal('https://github.com/PDKSophia/visResumeMook');
    } else {
        history.push('/resume');
     }
  };
}
```

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬é¦–é¡µçš„åŸºæœ¬åŠŸèƒ½å·²ç»å¼€å‘å®Œæˆã€‚ç›¸å…³ä»£ç å¯è®¿é—®ï¼š[chapter-06](https://github.com/PDKSophia/visResumeMook/tree/chapter-06)

### ğŸ¤” æ€è€ƒä»£ç ä¼˜åŒ–

ä¸Šé¢æˆ‘ä»¬æ˜¯ä»¥ç®€å•ç²—æš´å½¢å¼ï¼Œå°†é¡µé¢å’Œé€»è¾‘æ’¸äº†å‡ºæ¥ï¼Œä½†ä»£ç ç®€ç›´â€œä¸å ªå…¥ç›®â€ï¼Œä½œä¸ºä¸€ä¸ªæœ‰è¿½æ±‚ã€æœ‰ä»£ç æ´ç™–çš„å·¥ç¨‹å¸ˆï¼Œç®€ç›´æ— æ³•å®¹å¿ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯¹å®ƒè¿›è¡Œç¾åŒ–ã€‚

#### 1. webpack alias åˆ«å

æˆ‘ä»¬å›è¿‡å¤´çœ‹ï¼Œå½“æˆ‘ä»¬å¼•å…¥å›¾ç‰‡æ—¶ï¼Œè·¯å¾„è¦äº›ä¸€è¿ä¸²çš„ `../../../../`ï¼Œæœ‰æ²¡æœ‰æƒ³éª‚ x çš„å†²åŠ¨ï¼Œå¥½åœ¨ webpack æä¾› alias é…ç½®ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿé…ç½®åˆ«åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸Šæ‰‹è¯•è¯•ã€‚

æˆ‘ä»¬çš„å›¾ç‰‡éƒ½æ”¾åœ¨é¡¹ç›®æ ¹è·¯å¾„ä¸‹çš„ assets ä¸­ï¼Œæˆ‘ä»¬ç»™å®ƒåŠ ä¸ªåˆ«åï¼Œä¿®æ”¹ `webpack.base.js` æ–‡ä»¶

```js
module.exports = {
  resolve: {
    // ğŸ‘‡ æ·»åŠ åˆ«å
    alias: {
      '@assets': path.join(__dirname, '../', 'assets/'),
      '@src': path.join(__dirname, '../', 'app/renderer'),
    },
  },
};
```

æ·»åŠ ä¹‹åï¼Œæˆ‘ä»¬å°†æ–‡ä»¶çš„å¼•å…¥æ”¹æˆä¸‹é¢è¿™ç§å½¢å¼

```ts
// æœªä¿®æ”¹å‰
import Logo from '../../../../assets/logo.png';

// ä¿®æ”¹å
import Logo from '@assets/logo.png';
```

```ts
// æœªä¿®æ”¹å‰
import Root from './container/root';
import Resume from './container/resume';

// ä¿®æ”¹å
import Root from '@src/container/root';
import Resume from '@src/container/resume';
```

é‡è·‘ä¸€ä¸‹é¡¹ç›®ï¼ˆè¿è¡Œ npm run start:renderï¼‰å‘ç°æ²¡å•¥é—®é¢˜ï¼Œå®Œç¾

> å¦‚æœå‘ç°æ–‡ä»¶æŠ¥çº¢ï¼Œè¿™æ˜¯ ts æŠ¥é”™ï¼Œä½ éœ€è¦å‰å¾€ tsconfig.json ä¸­åŒæ ·æ·»åŠ ä¸€ä¸‹ paths é…ç½®

> æ·»åŠ ä¹‹åå¦‚æœè¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå¯ä»¥é‡å¯ä¸€ä¸‹ vscode

```json
{
  "compilerOptions": {
    // ğŸ‘‡ å¦‚æœtsæŠ¥é”™ï¼Œæ·»åŠ ä¸‹é¢è¿™æ®µä»£ç 
    "baseUrl": "./",
    "paths": {
      "@assets/*": ["./assets/*"],
      "@src/*": ["./app/renderer/*"],
      "@common/*": ["./app/renderer/common/*"]
    }
  }
}
```

#### 2. æ¨¡å—å…¥å£çš„å¸¸é‡å®šä¹‰ä¸ç±»å‹çº¦æŸ

ä¸Šé¢æˆ‘ä»¬å†™äº†ä¸€æ®µâ€œç²—æš´â€ä»£ç ï¼Œæˆ‘ä»¬èƒ½å¦å°†å…¶è¿›è¡ŒæŠ½ç¦»ï¼Œæ€è€ƒä¸€ä¸‹ï¼Œ`è·¯ç”±å¸¸é‡æ•°æ®`æ˜¯ä¸€ä¸ªåªä¼šåœ¨é¦–é¡µç”¨åˆ°çš„æ•°æ®è¿˜æ˜¯å…¶ä»–æ¨¡å—ä¹Ÿä¼šç”¨åˆ°çš„æ•°æ®å‘¢ï¼Ÿ

å…¶ä»–æ¨¡å—æ˜¯å¦ä¹Ÿä¼šé€šè¿‡ `history.push` æ–¹å¼è·³è½¬åˆ°å…¶ä»–æ¨¡å—é¡µé¢ï¼Œå¦‚æœæ˜¯ï¼Œæˆ‘ä»¬å°†æ¥åœ¨å…¶ä»–æ¨¡å—ä¹Ÿè¦å†™ä¸€æ®µâ€œç²—æš´â€ä»£ç ï¼Ÿè¿˜å¯èƒ½å‡ºç°çš„é—®é¢˜æ˜¯ï¼šæˆ‘ä»¬æœŸæœ›æ•°æ®ä¸€è‡´ï¼Œå½“å¾€å¾€å‡ºäºç–å¿½ï¼Œä¸¤è¾¹æ•°æ®ä¸ä¸€è‡´ã€‚

é‚£ä¹ˆæˆ‘ä»¬å°†å…¶æŠ½ç¦»æˆä¸€ä¸ªè·¯ç”±å¸¸é‡æ–‡ä»¶ï¼Œè¿›è¡Œç»Ÿä¸€ç»´æŠ¤ï¼Œæ˜¯ä¸æ˜¯æ›´å¥½å‘¢ï¼Ÿ

æˆ‘ä»¬åœ¨ `app/renderer` æ–‡ä»¶å¤¹ä¸‹æ–°å¢ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå–åä¸ºï¼šcommonï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯é¡¹ç›®ä¸­æ‰€æœ‰å…¬å…±é€šç”¨çš„ä»£ç æ–‡ä»¶ï¼Œåœ¨é‡Œè¾¹æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª constants æ–‡ä»¶å¤¹ï¼Œè¡¨ç¤ºè¿™é‡Œç»´æŠ¤æ‰€æœ‰å¸¸é‡æ•°æ®ã€‚

æˆ‘ä»¬åœ¨ contants ä¸‹ç»´æŠ¤ä¸€ä»½è·¯ç”±ä¸“ç”¨çš„æ–‡ä»¶ï¼Œå–åä¸º `router.ts`ï¼Œæˆ‘ä»¬æ¥å†™ä¸€ä¸‹è¯¥æ–‡ä»¶ï¼š

```ts
// æ¨¡å—è·¯å¾„
const ROUTER = {
  root: '/',
  resume: '/resume',
};
export default ROUTER;

export const ROUTER_KEY = {
  root: 'root',
  resume: 'resume',
};

// å…¥å£æ¨¡å—ï¼ŒTS å®šä¹‰ç±»å‹å¿…é¡»ä¸º TSRouter.Item
export const ROUTER_ENTRY: TSRouter.Item[] = [
  {
    url: 'https://github.com/PDKSophia/visResumeMook',
    key: 'intro',
    text: 'ä»‹ç»',
  },
  {
    url: ROUTER.resume,
    key: ROUTER_KEY.resume,
    text: 'ç®€å†',
  },
  {
    url: 'https://github.com/PDKSophia/visResumeMook',
    key: 'code',
    text: 'æºç ',
  },
];
```

æ—¢ç„¶æˆ‘ä»¬ä½¿ç”¨äº† Typescriptï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆå°è¯•ç‰›åˆ€ä¸€ä¸‹ï¼Œä¸Šé¢å®šä¹‰çš„ `ROUTER_ENTRY` æˆ‘ä»¬å°†å®ƒçš„ç±»å‹çº¦æŸä¸º `TSRouter.Item`ï¼Œæˆ‘ä»¬åœ¨ common æ–‡ä»¶å¤¹ä¸‹æ–°å¢ä¸€ä¸ªåä¸º types æ–‡ä»¶å¤¹ï¼Œè¡¨ç¤ºæ­¤æ–‡ä»¶å­˜æ”¾ç€åº”ç”¨ä¸­ç”¨åˆ°çš„ç±»å‹å®šä¹‰ã€‚æˆ‘ä»¬æ¥æ–°å¢ä¸€ä¸ªç”¨äºè·¯ç”±çš„ router.d.ts æ–‡ä»¶

```ts
// router.d.ts
// è·¯ç”±ç±»å‹çº¦æŸ
declare namespace TSRouter {
  export interface Item {
    /**
     * @description è·¯ç”±è·³è½¬é“¾æ¥
     */
    url: string;
    /**
     * @description å…³é”®è¯
     */
    key: string;
    /**
     * @description æ–‡æœ¬
     */
    text: string;
  }
}
```

ç´§æ¥ç€æˆ‘ä»¬åœ¨ webpack ä¸­é…ç½®ä¸€ä¸‹æ­¤æ–‡ä»¶å¤¹çš„åˆ«å

```js
alias: {
  // ...
  '@common': path.join(__dirname, '../', 'app/renderer/common'),
}
```

æˆ‘ä»¬è¿›è¡Œæ”¹é€ ï¼Œé¦–å…ˆå…ˆæ¥ä¿®æ”¹ä¸€ä¸‹è·¯ç”±ç»„ä»¶ router.tsx

```ts
// router.tsx è·¯ç”±ç»„ä»¶
// ğŸ‘‡ å¼•å…¥è·¯ç”±å¸¸é‡
import ROUTER from '@common/constants/router';

function Router() {
  return (
    <HashRouter>
      <Switch>
        <Route path={ROUTER.root} exact>
          <Root />
        </Route>
        <Route path={ROUTER.resume} exact>
          <Resume />
        </Route>
      </Switch>
      <Redirect to={ROUTER.root} />
    </HashRouter>
  );
}
export default Router;
```

æˆ‘ä»¬åœ¨é¦–é¡µå…¥å£ index.tsx æ–‡ä»¶è¿›è¡Œæ”¹é€ 

```ts
// é¦–é¡µå…¥å£ index.tsx
import { ROUTER_ENTRY, ROUTER_KEY } from '@common/constants/router';

// åœ¨æ–¹æ³•è°ƒç”¨ä¸Š
const onRouterToLink = (router: TSRouter.Item) => {
  if (router.text !== 'ç®€å†') {
    shell.openExternal(router.url);
  } else {
    history.push(router.url)
  }
};

// åœ¨éå†ä¸Š
<div styleName="action">
  {ROUTER_ENTRY.map((router: TSRouter.Item) => {
    return (
      <div key={router.key} styleName="item" onClick={() => onRouterToLink(router)} >
        {router.text}
      </div>
    );
  })}
</div>
```

#### 3. utils æ–¹æ³•æŠ½ç¦»

è™½ç„¶æˆ‘ä»¬ä»£ç ä¼˜åŒ–äº†ä¸€éƒ¨åˆ†ï¼Œä½†è¿˜æ˜¯å­˜åœ¨ä¸€äº›å°é—®é¢˜çš„ï¼Œæ¯”å¦‚ `router.text !== 'ç®€å†'` è¿™ä¸ªæ¡ä»¶åˆ¤æ–­å°±æœ‰äº›çªå…€äº†ï¼Œæˆ‘ä»¬å›åˆ°é—®é¢˜æœ¬è´¨ï¼Œè¿™é‡Œè¿›è¡Œåˆ¤æ–­åŸå› æ˜¯ï¼šå¦‚æœè¿™ä¸ª url æ˜¯å¤–éƒ¨å¯è®¿é—®çš„é“¾æ¥ï¼Œåˆ™é€šè¿‡ shell æ¨¡å—æ‰“å¼€æµè§ˆå™¨ï¼Œå¦‚æœæ˜¯é¡µé¢ä¹‹é—´è·³è½¬ï¼Œåˆ™è·³è½¬åˆ°å¯¹åº”çš„è·¯ç”±é¡µé¢ã€‚

æ‰€ä»¥é—®é¢˜èšç„¦åœ¨ï¼Œå¦‚ä½•åˆ¤æ–­ url æ˜¯ä¸æ˜¯å¯è®¿é—®çš„å¤–éƒ¨é“¾æ¥ï¼Ÿè¿™å¾ˆç®€å•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ¤æ–­ url æ˜¯ä¸æ˜¯ http æˆ– https å¼€å¤´ï¼Œè¯¥æ–¹æ³•è¿”å› boolean å€¼ï¼Œä¸‹é¢æˆ‘ä»¬æ¥å®ç°æ­¤æ–¹æ³•ã€‚

é¦–å…ˆåœ¨ common ä¸‹æ–°å¢ä¸€ä¸ª utils æ–‡ä»¶å¤¹ï¼Œå¹¶æ–°å¢ router.tsï¼Œè¡¨ç¤ºè¿™æ˜¯è·¯ç”±ç›¸å…³çš„å·¥å…·å¤„ç†å‡½æ•°ï¼Œåœ¨é‡Œé¢å®ç°æˆ‘ä»¬çš„å‡½æ•°æ–¹æ³•ï¼š

```ts
// renderer/common/utils/router.ts
/**
 * @desc åˆ¤æ–­æ˜¯å¦å±äºå¤–éƒ¨è¿æ¥
 * @param {string} url - é“¾æ¥
 */
export function isHttpOrHttpsUrl(url: string): boolean {
  let regRule = /(http|https):\/\/([\w.]+\/?)\S*/;
  return regRule.test(url.toLowerCase());
}
```

æ¥ä¸‹æ¥æˆ‘ä»¬è¿›è¡Œä¿®æ”¹çš„æ¡ä»¶åˆ¤æ–­

```ts
import { isHttpOrHttpsUrl } from '@common/utils/router';

// åœ¨æ–¹æ³•è°ƒç”¨ä¸Š
const onRouterToLink = (router: TSRouter.Item) => {
  if (isHttpOrHttpsUrl(router.url) {
    shell.openExternal(router.url);
  } else {
    history.push(router.url);
  }
};
```

#### 4. é¡µé¢å­˜åœ¨ç©ºç™½é—´éš™

æœ€æ‡’æƒ°çš„è§£å†³æ–¹å¼æ˜¯ï¼Œåœ¨ index.html ä¸­ï¼Œä¿®æ”¹ä¸€ä¸‹æ ·å¼

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VisResumeMook</title>
    <style>
      * {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
```

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„é¦–é¡µç»ˆäºå¼€å‘å®Œæ¯•ï¼Œå¹¶ä¸”ç»è¿‡æ€è€ƒï¼Œä¸æ–­ä¼˜åŒ–ï¼Œå°†é¡¹ç›®çš„æ•´ä¸ªæ–‡ä»¶ç»“æ„è¿›è¡Œä¸°å¯Œã€‚ä¸€å¼ å›¾å›é¡¾ä¸€ä¸‹æˆ‘ä»¬ç°åœ¨çš„æ–‡ä»¶ç»“æ„

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b86b1067dc24e4c9447cf4862016901~tplv-k3u1fbpfcp-watermark.image)

## æ€»ç»“

æœ¬ç« èŠ‚æ›´åƒæ˜¯æ‰‹æŠŠæ‰‹æ•™ç¨‹ï¼Œä»æœ€ç®€å•çš„ç²—æš´å®ç°ï¼Œåˆ°æœ€åçš„æ€è€ƒä»¥åŠæŠ½ç¦»ï¼Œä¸­é—´ç©¿æ’ç€ webpackã€ts ç­‰ä¸€äº›é…ç½®ï¼Œå¸Œæœ›è¿™ç« èŠ‚èƒ½è®©å°ä¼™ä¼´ä»¬ä¸Šæ‰‹é¡¹ç›®ï¼Œè¿™å¹¶ä¸éš¾ï¼Œæ¥ä¸‹æ¥çš„å®æˆ˜ç« èŠ‚ï¼Œé˜¿å®½ä¹Ÿä¼šé€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¾ªåºæ¸è¿›ï¼Œä¸€æ­¥æ­¥å¼•å¯¼å¤§å®¶å»æ€è€ƒå»ä¼˜åŒ–ã€‚

- ç®€å•ç²—æš´å‹ä»£ç ï¼š[chapter-06](https://github.com/PDKSophia/visResumeMook/tree/chapter-06)
- æ€è€ƒä¼˜åŒ–å‹ä»£ç ï¼š[chapter-06-op](https://github.com/PDKSophia/visResumeMook/tree/chapter-06-op)

**å¦‚æœæ‚¨åœ¨è¾¹é˜…è¯»è¾¹å®è·µæ—¶ï¼Œå‘ç°ä»£ç æŠ¥é”™æˆ–è€… TS æŠ¥é”™ï¼Œé‚£ä¹ˆå°ä¼™ä¼´ä»¬å¯ä»¥æ ¹æ®æŠ¥é”™ä¿¡æ¯ï¼Œå»çº¿ä¸Šçœ‹çœ‹ç›¸åº”çš„ä»£ç ã€‚**

å¦‚æœå¯¹æœ¬ç« èŠ‚å­˜åœ¨ç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚
