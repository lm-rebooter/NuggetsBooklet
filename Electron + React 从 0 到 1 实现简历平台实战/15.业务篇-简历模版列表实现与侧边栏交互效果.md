## å‰è¨€

å‰é¢ç« èŠ‚è·Ÿç€é˜¿å®½å·²å°†ç®€å†å¹³å°æ­å»ºå®Œæ¯•ï¼Œèƒ½å®ç°ä¸»æµç¨‹ï¼š**ä¿¡æ¯å½•å…¥->ä¿¡æ¯å±•ç¤º->ä¿¡æ¯å¯¼å‡º**ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸ºç®€å†å¹³å°æ·»åŠ ä¸€äº›ä¸°å¯Œæœ‰è¶£çš„åŠŸèƒ½ã€‚

æœ¬ç« èŠ‚å°†å¸¦å¤§å®¶å¼€å‘ç®€å†åˆ—è¡¨æ¨¡å—ï½ æœ¬ç« èŠ‚æ¶‰åŠçš„ç»„ä»¶æ ·å¼å‡ä¸åšè®²è§£ï¼Œæ‰€ä»¥å°ä¼™ä¼´ä»¬å¯ä»¥ç»“åˆ[chapter-15](https://github.com/PDKSophia/visResumeMook/tree/chapter-15)ä»£ç è¿›è¡Œé…å¥—é˜…è¯»å®è·µã€‚

> å¦‚æœä½ å¯¹æœ¬ç« èŠ‚å†…å®¹å…´è¶£ä¸å¤§ï¼Œå¯ä»¥å¿«é€Ÿé˜…è¯»æˆ–è·³è¿‡ã€‚

## ç»„ä»¶åˆ’åˆ†

æˆ‘ä»¬å…ˆæ¥ç®€å•å®ç°ä¸€ä¸‹ç®€å†æ¨¡ç‰ˆåˆ—è¡¨çš„æ•ˆæœã€‚ä»¥ä¸‹é¢åŸå‹ç¨¿ä¸ºä¸»è¿›è¡Œå¼€å‘

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8017082cabeb4917a9cce1649647c67e~tplv-k3u1fbpfcp-watermark.image)

å½“å°ä¼™ä¼´ä»¬çœ‹åˆ°åŸå‹å›¾ä¹‹åï¼Œç»“åˆå‰é¢æ‰€è¯´çš„ç»„ä»¶åŒ–æ€æƒ³ï¼Œæƒ³å¿…å¯¹ç»„ä»¶å·²ç»æœ‰äº†ä¸€ä¸ªæ˜ç¡®çš„åˆ’åˆ†ã€‚ä¸‹é¢æ˜¯é˜¿å®½çš„ä¸€ä¸ªç»„ä»¶åˆ’åˆ†å›¾ï¼š

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fdfe7110c10044a7a8a153f19eaab30c~tplv-k3u1fbpfcp-watermark.image)

æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬åŠ¨æ‰‹å®ç°ï½

## æ·»åŠ æ¨¡ç‰ˆåˆ—è¡¨å…¥å£æ¨¡å—

è¿›å…¥åˆ° `renderer/container` æ–‡ä»¶å¤¹ä¸‹ï¼Œæˆ‘ä»¬æ–°å¢ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå–åä¸ºï¼š`templateList`ï¼Œè¡¨æ˜è¿™æ˜¯æ¨¡ç‰ˆåˆ—è¡¨æ¨¡å—ï¼Œå¹¶åˆ›å»ºå…¥å£æ–‡ä»¶ index.tsx å’Œ index.less

```ts
// renderer/container/templateList/index.tsx
import React from 'react';
import './index.less';

function TemplateList() {
  return <div styleName="container">æˆ‘æ˜¯æ¨¡ç‰ˆåˆ—è¡¨æ¨¡å—</div>;
}
export default TemplateList;
```

æˆ‘ä»¬æ–°å¢äº†åˆ—è¡¨æ¨¡å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨è·¯ç”±å¸¸é‡å¤„æ·»åŠ æ­¤å…¥å£ï¼Œå¹¶ä¸”æ”¯æŒç‚¹å‡»è·³è½¬è‡³æ¨¡å—åˆ—è¡¨é¡µé¢ã€‚

æˆ‘ä»¬ä¿®æ”¹ `/renderer/common/constants` æ–‡ä»¶å¤¹ä¸‹çš„ router.tsï¼Œä¸‹é¢æ˜¯ä¼ªä»£ç 

```ts
// renderer/common/constants/router.ts

const ROUTER = {
  // ğŸ‘‡ æ–°å¢æ¨¡ç‰ˆåˆ—è¡¨å…¥å£
  templateList: '/templateList',
};

export const ROUTER_KEY = {
  // ğŸ‘‡ æ–°å¢æ¨¡ç‰ˆåˆ—è¡¨å…¥å£
  templateList: 'templateList',
};

// å…¥å£æ¨¡å—
export const ROUTER_ENTRY = [
  // ğŸ‘‡ æ–°å¢æ¨¡ç‰ˆåˆ—è¡¨å…¥å£
  {
    url: ROUTER.templateList,
    key: ROUTER_KEY.templateList,
    text: 'æ¨¡ç‰ˆ',
  },
];
```

æ·»åŠ äº†è·¯ç”±å…¥å£ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨è·¯ç”±ç»„ä»¶ï¼Œç¼–å†™æ­¤è·¯ç”±å¯¹åº”çš„é¡µé¢ã€‚è·¯ç”±ç»„ä»¶ router.tsxï¼Œæˆ‘ä»¬ç¨ä½œä¿®æ”¹ï¼Œä¸‹é¢æ˜¯ä¼ªä»£ç 

```ts
// renderer/router.tsx

import TemplateList from '@src/container/templateList';
import ROUTER from '@common/constants/router';

function Router() {
  return (
    <HashRouter>
      <Switch>
        {/* ğŸ‘‡ æ–°å¢è·¯ç”±ï¼Œå¥½è®©æˆ‘ä»¬èƒ½è·³è½¬åˆ°å¯¹åº”çš„é¡µé¢ */}
        <Route path={ROUTER.templateList} exact>
          <TemplateList />
        </Route>
      </Switch>
    </HashRouter>
  );
}
export default Router;
```

æ­¤æ—¶æˆ‘ä»¬è¿è¡Œä¸€ä¸‹ç¨‹åºï¼Œæ‰§è¡Œ `npm run start:main` ä¸ `npm run start:render`ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„é¦–é¡µå¤šäº†ä¸€ä¸ª`æ¨¡ç‰ˆ`å…¥å£ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ä¹‹åï¼Œè¿›å…¥åˆ°æˆ‘ä»¬çš„æ¨¡ç‰ˆåˆ—è¡¨é¡µé¢ã€‚

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d62a875afa5a4c2a8f54bd88e2ce394b~tplv-k3u1fbpfcp-watermark.image)

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b1d4ed31ed843f58467aaf7b7a2762f~tplv-k3u1fbpfcp-watermark.image)

## Header ç»„ä»¶å®ç°

åœ¨ templateList æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢ Header æ–‡ä»¶å¤¹ï¼Œå¹¶æ–°å¢ index.tsx ä¸ index.lessï¼Œæ ·å¼ç›¸å…³ä»£ç çœç•¥

```ts
// renderer/container/templateList/Header/index.tsx

import React from 'react';
import './index.less';
import { useHistory } from 'react-router';

function Header() {
  const history = useHistory();
  const goBack = () => history.push('/');
  return (
    <div styleName="header">
      <div styleName="back" onClick={goBack}>
        è¿”å›
      </div>
      <p styleName="title">ç®€å†æ¨¡ç‰ˆä»“åº“</p>
    </div>
  );
}
export default Header;
```

æ­¤åˆ»ï¼Œæˆ‘ä»¬å°† Header ç»„ä»¶å¼•å…¥ï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•

```ts
// renderer/container/templateList/index.tsx

import React from 'react';
import './index.less';
// ğŸ‘‡ å¼•å…¥Headerç»„ä»¶
import Header from './Header';

function TemplateList() {
  return (
    <div styleName="container">
      <Header />
    </div>
  );
}
export default TemplateList;
```

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f69115258b644a6595e7ae89d3c6535e~tplv-k3u1fbpfcp-watermark.image)

## åˆ—è¡¨ä¾§è¾¹æ ç»„ä»¶å®ç°

æˆ‘ä»¬æœŸæœ›çš„æ•ˆæœæ˜¯ï¼šåˆ—è¡¨å®¹å™¨ä¸­é™ˆåˆ—å‡ºæ‰€æœ‰çš„æ¨¡ç‰ˆï¼Œå½“é¼ æ ‡æ‚¬æµ®åœ¨å›¾ç‰‡ä¸Šï¼Œå¦‚æœå½“å‰æ‚¬æµ®çš„æ˜¯å½“å‰æ¨¡ç‰ˆï¼Œåˆ™æ˜¾ç¤ºâ€œå·²ä½¿ç”¨â€ï¼Œå¦åˆ™æ˜¾ç¤ºâ€œé¢„è§ˆæ¨¡ç‰ˆâ€ã€‚

> è¯·æ³¨æ„ï¼šå®ç°æ­¤ç»„ä»¶ä¹‹å‰ï¼Œè¯·å°ä¼™ä¼´å…ˆå» assets æ–‡ä»¶å¤¹ä¸‹æ–°å¢ template æ–‡ä»¶å¤¹ï¼Œæ·»åŠ ä¸¤ä¸ªæ¨¡ç‰ˆçš„å°é¢ï¼Œè¿™ä¸¤ä¸ªæ¨¡ç‰ˆå°é¢åœ°å€åœ¨æ­¤ï¼š[ä¸‹è½½å°é¢åœ°å€](https://github.com/PDKSophia/visResumeMook/tree/chapter-15/assets/template)

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb73d59eeebd4c08a81e1a64f2239945~tplv-k3u1fbpfcp-watermark.image)

åœ¨æ·»åŠ äº†æ¨¡ç‰ˆå°é¢ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ templateList æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢ Navigation æ–‡ä»¶å¤¹ï¼Œå¹¶æ–°å¢ index.tsx ä¸ index.lessï¼Œç”±äºæ ·å¼ä»£ç ç›¸å¯¹è¾ƒå¤šï¼Œè¿™é‡Œä¸åšå±•ç¤ºã€‚

```ts
// renderer/container/templateList/Navigation/index.tsx

import React from 'react';
import './index.less';
import UseIcon from '@assets/icon/use.png';
// ğŸ‘‡ æ¨¡ç‰ˆå°é¢å›¾
import TemplateCoverOne from '@assets/template/template1.jpg';
import TemplateCoverTwo from '@assets/template/template2.jpg';
import MyScrollBox from '@common/components/MyScrollBox';
import MyButton from '@common/components/MyButton';

function Navigation() {
  const height = document.body.clientHeight;

  return (
    <div styleName="navigation">
      <MyScrollBox maxHeight={height - 60 - 32}>
        {/* æ‚¬æµ®æ•ˆæœä¸€ï¼šå±äºå½“å‰æ¨¡ç‰ˆ */}
        <div styleName="template">
          <img styleName="cover" src={TemplateCoverOne} />
          <div styleName="mask">
            <img styleName="use" src={UseIcon} />
          </div>
        </div>
        {/* æ‚¬æµ®æ•ˆæœäºŒï¼šå¯é€‰æ‹©é¢„è§ˆæ¨¡ç‰ˆ */}
        <div styleName="template">
          <img styleName="cover" src={TemplateCoverTwo} />
          <div styleName="mask">
            <MyButton size="middle" className="view-btn" onClick={() => {}}>
              é¢„è§ˆæ¨¡ç‰ˆ
            </MyButton>
          </div>
        </div>
      </MyScrollBox>
    </div>
  );
}

export default Navigation;
```

æˆ‘ä»¬æ¥åˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„æ¨¡ç‰ˆåˆ—è¡¨é™æ€æ•ˆæœå·²ç»å®Œæˆã€‚

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0b06fc5a3e4d421ea395f5c42a81e1e6~tplv-k3u1fbpfcp-watermark.image)

## Footer ç»„ä»¶å®ç°

æˆ‘ä»¬åœ¨ templateList æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢ Footer æ–‡ä»¶å¤¹ï¼Œåœ¨æ­¤æ–‡ä»¶å¤¹ä¸­æ–°å¢ index.tsx ä¸ index.lessã€‚

è¯¥ç»„ä»¶çš„ä¸»è¦èŒè´£æ˜¯ï¼šä»¥å½“å‰é¢„è§ˆçš„é™æ€æ¨¡ç‰ˆè¿›è¡Œç®€å†åˆ¶ä½œã€‚

æ˜ç™½æ­¤ç»„ä»¶çš„ä½œç”¨ä¹‹åï¼Œæˆ‘ä»¬å¾ˆå¿«å°±èƒ½ç¼–å†™å‡ºç›¸å…³ä»£ç ã€‚

```ts
// renderer/container/templateList/Footer/index.tsx

import React from 'react';
import './index.less';
import MyButton from '@common/components/MyButton';

function Footer() {
  const onMadeResume = () => {
    console.log('è·³è½¬å‰å¾€åˆ¶ä½œé¡µé¢');
  };
  return (
    <div styleName="footer">
      <MyButton size="middle" className="use-btn" onClick={onMadeResume}>
        ä»¥æ­¤æ¨¡ç‰ˆå‰å¾€åˆ¶ä½œç®€å†
      </MyButton>
    </div>
  );
}

export default Footer;
```

## é™æ€æ¨¡ç‰ˆç»„ä»¶å±•ç¤º

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ templateList æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢ StaticResume æ–‡ä»¶å¤¹ï¼Œè¡¨ç¤ºæ­¤è¿™æ˜¯é™æ€æ¨¡ç‰ˆé¢„è§ˆï¼Œæˆ‘ä»¬æ–°å¢ index.tsx ä¸ index.lessã€‚

åœ¨[ç¬¬å…«ç« èŠ‚](https://juejin.cn/book/6950646725295996940/section/6962895451875966989)å¤„ï¼Œé˜¿å®½ä¸ºå¤§å®¶æä¾›äº†ä¸€ä»½ç®€å†æ¨¡ç‰ˆï¼Œæ‰€ä»¥ä¸å‡ºæ„å¤–çš„æƒ…å†µä¸‹ï¼Œå°ä¼™ä¼´ä»¬çš„ `renderer/container` æ–‡ä»¶å¤¹ä¸‹ï¼Œä¼šå­˜åœ¨ä¸€ä¸ªåä¸º `templates` çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬ç›´æ¥å¼•å…¥é‡Œé¢çš„é™æ€æ¨¡ç‰ˆè¿›è¡Œå±•ç¤ºå³å¯ã€‚

```ts
// renderer/container/templateList/StaticResume/index.tsx

import React from 'react';
import './index.less';
// ğŸ‘‡ å¼•å…¥æ‰€æœ‰çš„é™æ€æ¨¡ç‰ˆ
import * as TemplateList from '@src/container/templates';
// ğŸ‘‡ å¼•å…¥ä¸Šè¾¹å†™å¥½çš„ Footer ç»„ä»¶
import Footer from '../Footer';
import MyScrollBox from '@common/components/MyScrollBox';

function StaticResume() {
  const HEADER_HEIGHT = 76; // è·ç¦»å¤´éƒ¨è·ç¦»
  const height = document.body.clientHeight;

  return (
    <div styleName="container">
      <MyScrollBox maxHeight={height - HEADER_HEIGHT}>
        {/* è¿™é‡Œæš‚æ—¶å…ˆå†™æ­»ç¬¬ä¸€ä¸ªé™æ€æ¨¡ç‰ˆ */}
        <TemplateList.TemplateOne />
        <Footer />
      </MyScrollBox>
    </div>
  );
}

export default StaticResume;
```

åˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œçœ‹çœ‹æ•ˆæœæ˜¯å¦ç¬¦åˆæˆ‘ä»¬æœŸæœ›ã€‚æœä¸å…¶ç„¶ï¼Œå¹¶ä¸”æ»šåŠ¨è‡³åº•éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°è·³è½¬æŒ‰é’®ã€‚

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/590a28cf43d74709b98d07b0ad40cf64~tplv-k3u1fbpfcp-watermark.image)

è‡³æ­¤ï¼Œæˆ‘ä»¬çš„æ¨¡ç‰ˆåˆ—è¡¨å·²å¼€å‘å®Œæ¯•ï¼ŒåŸºæœ¬ä¸Šèƒ½å®ç°æˆ‘ä»¬æƒ³è¦çš„æ ·å¼æ•ˆæœã€‚

## ğŸ¤” æ¨¡ç‰ˆæ•°æ®æ˜¾ç¤º

ä¸Šé¢æˆ‘ä»¬æ˜¯ä»¥ç®€å•ç²—æš´å½¢å¼ï¼Œå°†é¡µé¢æ’¸äº†å‡ºæ¥ï¼Œä½†ç»†å¿ƒçš„ä½ ä¼šå‘ç°ï¼Œ**å‡ ä¹éƒ½æ˜¯å†™æ­»çš„æ•°æ®**ï¼Œæ¯”å¦‚æ¨¡ç‰ˆå°é¢å›¾ç‰‡ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡ import å¼•å…¥ï¼Œå‡è®¾å°†æ¥æœ‰ n å¼ æ¨¡ç‰ˆå°é¢ï¼Œæ˜¯ä¸æ˜¯éœ€è¦å¼•å…¥ n æ¬¡ï¼Ÿ

æˆ‘åœ¨æƒ³ï¼šèƒ½å¦é€šè¿‡è¯»å–æ¨¡ç‰ˆå°é¢çš„æ–‡ä»¶å¤¹ï¼Œä»¥è¯»æ–‡ä»¶å¤¹çš„å½¢å¼æŠŠæ‰€æœ‰å°é¢è¯»å‡ºæ¥ï¼Œç„¶åè¿›è¡Œå±•ç¤ºå‘¢ï¼Ÿå¾—ç›Šäº Electron å†…ç½®äº† NodeJSï¼Œæˆ‘ä»¬é€šè¿‡ fs æ–‡ä»¶ç³»ç»Ÿæ¨¡å—æ¥è¯•è¯•ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½è¯»åˆ°æ¨¡ç‰ˆå°é¢çš„æ‰€æœ‰å›¾ç‰‡ã€‚

### useReadDirAssetsTemplateHooks

æˆ‘ä»¬åœ¨ renderer æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢ hooks æ–‡ä»¶å¤¹ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬çš„æ–‡ä»¶ç›®å½•å›¾

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/077c156b3af04601a98914cd97ddf006~tplv-k3u1fbpfcp-watermark.image)

åœ¨ hooks æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢è‡ªå®šä¹‰ hooksï¼Œæš‚ä¸”å«åšï¼š`useReadDirAssetsTemplateHooks.ts`ï¼Œä»åç§°ä¸Šå¯çŸ¥ï¼Œè¯¥ hooks ä¸»è¦æ˜¯è¯»å–æ¨¡ç‰ˆé™æ€æ–‡ä»¶ç›®å½•ã€‚è®©æˆ‘ä»¬æ¥ç¼–å†™å®ƒ

```ts
// renderer/hooks/useReadDirAssetsTemplateHooks.ts

import fileAction from '@common/utils/file';
import { getAppPath } from '@common/utils/appPath';

export default function () {
  return () => {
    // 1. å…ˆè·å–åº”ç”¨åœ°å€
    getAppPath().then((appPath: string) => {
      console.log(appPath);
      // 2. ä»assetsè¯»å–æ¨¡ç‰ˆå›¾ç‰‡ä¿¡æ¯ï¼Œæ„é€ æ¨¡ç‰ˆåˆ—è¡¨
      fileAction
        .readDir(`${appPath}assets/template`)
        .then((files: string[]) => {
          // ğŸ‘‡ æ‰“å°ä¸€ä¸‹è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶
          console.log('è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶æœ‰ï¼š\n');
          console.log(files);
        })
        .catch((err: NodeJS.ErrnoException) => {
          throw new Error(err.message);
        });
    });
  };
}
```

ä¸å‡ºæ„å¤–çš„è¯ï¼Œæ­¤æ—¶çš„ä½ ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯æ‰¾ä¸åˆ° `fileAction.readDir()` æ–¹æ³•ï¼ŒåŸæ¥åœ¨[ç¬¬ä¸ƒç« èŠ‚](https://juejin.cn/book/6950646725295996940/section/6962906314565484551)æˆ‘ä»¬å°è£…çš„ file.ts æ–‡ä»¶ä¸­æœªæ”¯æŒ readDirï¼Œæˆ‘ä»¬å‰å¾€ `@common/utils/file.ts`ï¼Œæ·»åŠ ä¸€ä¸‹ä»£ç ã€‚

```ts
const fileAction = {
  /**
   * @description è¯»å–ç›®å½•å†…å®¹
   * @param path è·¯å¾„
   * @returns  {Promise}
   */
  readDir: (path: string): Promise<string[]> => {
    return fsPromiseAPIs.readdir(path);
  },
};
```

æ·»åŠ ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦æ€è€ƒä»€ä¹ˆæ—¶æœºæ‰§è¡Œè¯¥é€»è¾‘ï¼šé˜¿å®½å¸Œæœ›åœ¨åº”ç”¨å¯åŠ¨åï¼Œèƒ½å°†æ¨¡ç‰ˆæ¨¡å—ç›¸å…³çš„åˆå§‹åŒ–å·¥ä½œå®Œæˆã€‚æ‰€ä»¥é˜¿å®½é€‰æ‹©åœ¨è·¯ç”±ç»„ä»¶çš„ didMount ç”Ÿå‘½å‘¨æœŸä¸­æ‰§è¡Œåˆå§‹åŒ–çš„ç›¸å…³å·¥ä½œã€‚

å‰å¾€è·¯ç”±ç»„ä»¶ router.tsx è¿›è¡Œåˆå§‹åŒ–

```ts
// renderer/router.tsx

import useReadDirAssetsTemplateHooks from './hooks/useReadDirAssetsTemplateHooks';

function Router() {
  const readDirAssetsTemplateHooks = useReadDirAssetsTemplateHooks();
  // ğŸ‘‡ è¿›è¡Œåˆå§‹åŒ–å·¥ä½œ
  useEffect(() => {
    readDirAssetsTemplateHooks();
  }, []);

  // åé¢ä»£ç å¿½ç•¥
}
export default Router;
```

æ­¤æ—¶æˆ‘ä»¬å°†åº”ç”¨è·‘èµ·æ¥ï¼Œæ‰“å¼€æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°æ­¤æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨ 2 å¼ å›¾ç‰‡

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4cd30486e93848a094c9971d228f92af~tplv-k3u1fbpfcp-watermark.image)

å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬ç°åœ¨åªæ‹¿åˆ°æ–‡ä»¶åï¼Œé‚£ä¹ˆå¦‚ä½•è¯»åˆ°æ­¤æ–‡ä»¶å†…å®¹å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬é€šè¿‡ `fileAction.read` æ–¹æ³•è¯»å–å›¾ç‰‡å†…å®¹ï¼Œæ„é€ ä¸€ä¸ªæ¨¡ç‰ˆå°é¢åˆ—è¡¨ï¼Œå°†å…¶å­˜å…¥åˆ° redux ä¸­ï¼Œå¹¶é»˜è®¤é€‰ä¸­ç¬¬ä¸€æ¡æ¨¡ç‰ˆ

```ts
// renderer/hooks/useReadDirAssetsTemplateHooks.ts
import fileAction from '@common/utils/file';
import { useDispatch } from 'react-redux';
import { getAppPath } from '@common/utils/appPath';
import { createUID } from '@common/utils';

export default function () {
  const dispatch = useDispatch();
  return () => {
    // 1. å…ˆè·å–åº”ç”¨åœ°å€
    getAppPath().then((appPath: string) => {
      // 2. ä»assetsè¯»å–æ¨¡ç‰ˆå›¾ç‰‡ä¿¡æ¯ï¼Œæ„é€ æ¨¡ç‰ˆåˆ—è¡¨
      fileAction
        .readDir(`${appPath}assets/template`)
        .then(async (files: string[]) => {
          // 3. æ„é€ æ¨¡ç‰ˆåˆ—è¡¨
          if (files.length > 0) {
            let templateList: TSTemplate.Item[] = [];
            for (const fileName of files) {
              const base64URL = await fileAction.read(`${appPath}assets/template/${fileName}`, 'base64');
              templateList.push({
                templateName: fileName,
                templateId: createUID(),
                templateCover: `data:image/png;base64,${base64URL}`,
              });
            }
            // 4. å­˜å…¥åˆ° redux ä¸­ï¼Œå¹¶é»˜è®¤é€‰ä¸­ç¬¬ä¸€æ¡
            dispatch({
              type: 'templateModel/setStoreList',
              payload: [
                {
                  key: 'templateList',
                  values: templateList,
                },
                {
                  key: 'selectTemplate',
                  values: templateList[0],
                },
              ],
            });
          }
        })
        .catch((err: NodeJS.ErrnoException) => {
          throw new Error(err.message);
        });
    });
  };
}
```

æ­¤æ—¶ä¼šçœ‹åˆ° TSTemplate æŠ¥é”™ï¼Œæˆ‘ä»¬å» `@common/types/template.d.ts` ä¸­æ·»åŠ ç±»å‹è¯´æ˜

```ts
// renderer/common/types/template.d.ts

declare namespace TSTemplate {
  export interface Item {
    /**
     * @description æ¨¡ç‰ˆid
     */
    templateId: string;
    /**
     * @description æ¨¡ç‰ˆåç§°
     */
    templateName: string;
    /**
     * @description æ¨¡ç‰ˆå°é¢
     */
    templateCover: string;
  }
}
```

åŒæ—¶éœ€è¦å» `store/templateModel` æ–‡ä»¶ä¸‹ï¼Œæ·»åŠ  state å€¼

```ts
//  renderer/store/templateModel.ts

export interface TStore {
  /**
   * @description é€‰ä¸­å·¥å…·æ¡æ¨¡å—çš„keys
   */
  resumeToolbarKeys: string[];
  /**
   * @description æ¨¡å—åˆ—è¡¨
   */
  templateList: TSTemplate.Item[];
  /**
   * @description å½“å‰é€‰ä¸­çš„æ¨¡ç‰ˆ
   */
  selectTemplate: TSTemplate.Item;
}

const templateModel: TSRcReduxModel.Props<TStore> = {
  namespace: 'templateModel',
  openSeamlessImmutable: true,
  state: {
    resumeToolbarKeys: [],
    templateList: [],
    selectTemplate: {
      templateId: '',
      templateName: '',
      templateCover: '',
    },
  },
};

export default templateModel;
```

æœ€åæˆ‘ä»¬åˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ° redux ä¸­å·²ç»å°†æˆ‘ä»¬çš„æ¨¡ç‰ˆæ•°æ®å­˜å…¥ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ac9ac8d9fdf441cad055847524964f0~tplv-k3u1fbpfcp-watermark.image)

## åŠ¨æ€æ˜¾ç¤ºæ•°æ®æ¨¡ç‰ˆåˆ—è¡¨

å‰å¾€ Navigation ç»„ä»¶ä¸­ï¼Œè®²é™æ€æ•°æ®æ”¹ä¸ºä» redux ä¸­è¯»å–æ•°æ®ã€‚
```ts
import React from 'react';
import './index.less';
import UseIcon from '@assets/icon/use.png';
import MyScrollBox from '@common/components/MyScrollBox';
import MyButton from '@common/components/MyButton';
import { useDispatch, useSelector } from 'react-redux';

function Navigation() {
  const dispatch = useDispatch();
  const HEADER_HEIGHT = 92;
  const height = document.body.clientHeight;
  // ğŸ‘‡ ä» redux ä¸­è¯»å–æ•°æ®
  const templateList: TSTemplate.Item[] = useSelector((state: any) => state.templateModel.templateList);
  const selectTemplate: TSTemplate.Item = useSelector((state: any) => state.templateModel.selectTemplate);

  const onChangeTemplate = (template: TSTemplate.Item) => {
    dispatch({
      type: 'templateModel/setStore',
      payload: {
        key: 'selectTemplate',
        values: template,
      },
    });
  };

  return (
    <div styleName="navigation">
      <MyScrollBox maxHeight={height - HEADER_HEIGHT}>
        {templateList &&
          templateList.length > 0 &&
          templateList.map((template: TSTemplate.Item) => {
            return (
              <div styleName="template" key={template?.templateId}>
                <img styleName="cover" src={template?.templateCover} />
                <div styleName="mask">
                  {selectTemplate?.templateId === template?.templateId && (
                    <img styleName="use" src={UseIcon} />
                  )}
                  {selectTemplate?.templateId !== template?.templateId && (
                    <MyButton size="middle" className="view-btn" onClick={() => { onChangeTemplate(template) }}>
                      é¢„è§ˆæ¨¡ç‰ˆ
                    </MyButton>
                  )}
                </div>
              </div>
            );
          })}
      </MyScrollBox>
    </div>
  );
}

export default Navigation;
```

è‡³æ­¤æˆ‘ä»¬å®ç°äº†è‡ªå®šä¹‰ `useReadDirAssetsTemplateHooks`ï¼Œ**é€šè¿‡ fs æ–‡ä»¶ç³»ç»Ÿè¯»å–æ–‡ä»¶å¤¹å†…å®¹ï¼Œæ„é€ æ¨¡ç‰ˆåˆ—è¡¨ï¼Œè¿›è¡ŒåŠ¨æ€çš„å±•ç¤ºï¼Œä»è€Œè§£å†³ç¹ççš„å¤šæ¬¡ import å¤šå¼ æ¨¡ç‰ˆå°é¢**ã€‚

## ä¾§è¾¹æ å±•å¼€æ”¶èµ·

è™½ç„¶è¯´æˆ‘ä»¬æ˜¯å°†åŸºæœ¬åŠŸèƒ½å®ç°å®Œæˆäº†ï¼Œä½†åœ¨äº¤äº’ä½“éªŒä¸Šï¼Œæ€»æ„Ÿè§‰æœ‰äº›â€œå‘†æ¿åƒµç¡¬â€ï¼Œæˆ‘ä»¬èƒ½å¦é€šè¿‡ä¾§è¾¹æ å±•å¼€æ”¶èµ·çš„äº¤äº’æ•ˆæœï¼Œè®©åº”ç”¨çœ‹èµ·æ¥â€œå¹´è½»â€ä¸€äº›å‘¢ï¼Ÿ

å…ˆæ¥çœ‹çœ‹æ•ˆæœå›¾

- ä¾§è¾¹æ å±•å¼€æ—¶

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85c1f727d5f64831b02817f6ab04339e~tplv-k3u1fbpfcp-watermark.image)

- ä¾§è¾¹æ æ”¶èµ·æ—¶

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/84addec47f4e4d9bae9bf99bf1ef13bc~tplv-k3u1fbpfcp-watermark.image)

æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼Œçœ‹èµ·æ¥ä¾§è¾¹æ å¥½åƒé€šè¿‡å®šä½è¿›è¡Œçš„â€œä½ç½®åˆ‡æ¢â€ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé™æ€æ¨¡ç‰ˆæ˜¯å±…ä¸­æ˜¾ç¤ºåœ¨é¡µé¢ä¸­çš„ï¼Œä¾§è¾¹æ æ­¤åˆ»è¿˜å¤šäº†ä¸€ä¸ªåˆ‡æ¢çŠ¶æ€çš„â€œæŒ‰é’®â€ã€‚

å¯¹äºå·²å®Œæˆçš„æ¨¡å—ï¼Œæˆ‘ä»¬æ˜¯ä¸æœŸæœ›å†å»åŠ¨å®ƒã€‚å¹¶ä¸”æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼Œè¿™ä¸ªäº¤äº’æ•ˆæœä¼šä¸ä¼šæ˜¯é€šç”¨çš„ï¼Ÿæ¯”å¦‚å°†æ¥åœ¨å…¶ä»–æ¨¡å—ï¼Œæ˜¯å¦ä¹Ÿå­˜åœ¨ä¾§è¾¹æ ï¼ŒåŒæ—¶ä¾§è¾¹æ äº¤äº’ä¸æ­¤ä¸€è‡´ï¼Ÿä»”ç»†å“ä¸€å“ï¼Œæ˜¯ä¸æ˜¯åšæˆé€šç”¨ç»„ä»¶ä¼šæ›´åŠ åˆé€‚ï¼Ÿ

### MyRectSize

æˆ‘ä»¬åœ¨ `common/components` ä¸‹æ–°å¢ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå–åä¸º MyRectSizeï¼Œæ–°å¢ 5 ä¸ªæ–‡ä»¶ï¼š`index.ts`ã€`parent.ts`ã€`left.ts`ã€`right.ts`ã€`index.less`

å‡ºäºä»£ç é‡æ¯”è¾ƒç²¾ç®€ï¼Œå°±å…¨é‡è´´ä¸Šæ¥äº†ï¼Œå…³äºæ ·å¼éƒ¨åˆ†ï¼Œå°ä¼™ä¼´ä»¬å¯ç‚¹å‡»é“¾æ¥[æ ·å¼ä»£ç ](https://github.com/PDKSophia/visResumeMook/blob/chapter-15/app/renderer/common/components/MyRectSize/index.less)é˜…è¯»

ä¸‹é¢ç›´æ¥è´´ä»£ç å¹¶åœ¨æ³¨é‡Šä¸­è®²è§£ï¼Œä¸€å®šè¦çœ‹æ³¨é‡Šï¼ï¼ï¼

```ts
// ğŸ‘‡ å®šä¹‰ç»„ä»¶çš„å…¥å£æ–‡ä»¶
import './index.less';
import ParentComponent from './parent';
export default ParentComponent;
```

åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œä¸»è¦æ˜¯è·å–è·å–æ ·å¼ï¼Œè¿›è¡Œä¼ é€’

```ts
import React from 'react';
// ğŸ‘‡ 1. å¼•å…¥å·¦ä¾§ä¸å³ä¾§ç»„ä»¶
import LeftComponent from './left';
import RightComponent from './right';

interface IProps {
  /**
   * @description è‡ªå®šä¹‰æ ·å¼
   */
  style?: React.CSSProperties;
  children?: any;
}

class ParentComponent extends React.Component<IProps> {
  // ğŸ‘‡ 2. å®šä¹‰ç±»ç»„ä»¶çš„é™æ€å±æ€§
  static Left = LeftComponent;
  static Right = RightComponent;

  defaultLeftBoxRef = React.createRef();

  getParentStyle() {
    return {
      display: 'flex',
      justifyContent: 'center',
    };
  }

  getLeftStyle() {
    return {
      position: 'absolute',
      left: 16,
    };
  }

  getRightStyle() {
    return {};
  }

  // ğŸ‘‡ 3. è·å–å·¦ä¾§å®¹å™¨
  get leftBoxRef() {
    const { children } = this.props;
    const leftElement = children[0];
    return leftElement.props.boxRef || this.defaultLeftBoxRef;
  }

  getChild() {
    const { children } = this.props;
    const leftElement = children[0];
    const rightElement = children[1];

    return [
      React.cloneElement(leftElement, {
        style: { ...this.getLeftStyle(), ...(leftElement.props.style || {}) },
        // ğŸ‘‡ 4. ä¸€å®šè¦ç»™å·¦ä¾§ç»„ä»¶ä¼ é€’
        boxRef: this.leftBoxRef,
        key: 'componentLeft',
      }),
      React.cloneElement(rightElement, {
        style: { ...this.getRightStyle(), ...(rightElement.props.style || {}) },
        key: 'componentRight',
      }),
    ];
  }

  render() {
    const { style } = this.props;
    let finialStyle = this.getParentStyle();
    return (
      <div className="parent-box" style={{ ...finialStyle, ...style }}>
        {this.getChild()}
      </div>
    );
  }
}

export default ParentComponent;
```

æ¥ä¸‹æ¥çœ‹çœ‹ left ç»„ä»¶ä¸­ï¼Œåšäº†ä»€ä¹ˆäº‹æƒ…ï¼Œä¸»è¦æ˜¯è·å–ä¾§è¾¹æ å·¦ä¾§è‡ªç»„ä»¶çš„çœŸå®å®½åº¦ï¼Œå¹¶å†…ç½®äº†åˆ‡æ¢çš„ Icon æŒ‰é’®ï¼Œé€šè¿‡å±•ç¤º/æ”¶èµ·äº¤äº’ï¼Œè¿›è¡Œä½ç½®åç§»ã€‚

```ts
import React from 'react';
import classnames from 'classnames';
import { reducePX, transformStringToNumber } from '@common/utils';

interface IProps {
  /**
   * @description è‡ªå®šä¹‰æ ·å¼
   */
  style?: React.CSSProperties;
  boxRef?: any;
  key?: string;
}

interface IState {
  /**
   * @description æ˜¯å¦æ˜¾ç¤ºMenuæ§ä»¶
   */
  showMenu: boolean;
  /**
   * @description å·¦ä¾§ç»„ä»¶DOMå®½åº¦
   */
  width: number;
}

class LeftComponent extends React.Component<IProps, IState> {
  isTransition: boolean;
  defaultRef = React.createRef();

  constructor(props: IProps) {
    super(props);
    this.state = {
      showMenu: true,
      // ğŸ‘‡ 1. ä¸€å¼€å§‹æ—¶çš„å®½åº¦æ˜¯0
      width: 0,
    };
    this.isTransition = false; // åªæœ‰ç‚¹å‡»çš„æ—¶å€™æ‰åŠ ä¸ŠåŠ¨ç”»
  }

  componentDidMount() {
    // ğŸ‘‡ 2. è¿™é‡Œå°±æ˜¯è·å–çˆ¶ç»„ä»¶ç»™å·¦ä¾§è‡ªç»„ä»¶ä¼ é€’çš„ boxRef
    if (
      this.boxRef.current &&
      this.boxRef.current.children &&
      this.boxRef.current.children.length > 0 &&
      this.boxRef.current.children[0].clientWidth
    ) {
      // ğŸ‘‡ 3. è·å–å·¦ä¾§ä¾§è¾¹æ çš„çœŸå®å®½åº¦ï¼Œç„¶åèµ‹å€¼ï¼Œä¸‹é¢åœ¨æ¸²æŸ“æ—¶ä¼šç”¨åˆ°
      this.setState({ width: this.boxRef.current.children[0].clientWidth });
    }
  }

  get boxRef() {
    return this.props.boxRef || this.defaultRef;
  }

  onChangeMenu = () => {
    this.setState((prev) => {
      return {
        showMenu: !prev.showMenu,
      };
    });
  };

  render() {
    const { showMenu, width } = this.state;
    const { key = 'componentLeft', style = {}, children } = this.props;
    return (
      <div key={key}>
        <div
          ref={this.boxRef}
          className="left-box"
          style={{ width, ...style, left: showMenu ? style?.left : -width }}
        >
          {children}
        </div>
        <div
          className="rect-menu"
          style={{
            left: showMenu
              ? width + (transformStringToNumber(reducePX(style?.left)) || 0)
              : 0,
            transition: this.isTransition ? 'all 0.5s' : 'none',
          }}
          onClick={() => {
            this.onChangeMenu();
            this.isTransition = true;
          }}
        >
          <div
            className={classnames('rect-icon', {
              'rect-icon-hidden': !showMenu,
            })}
          />
        </div>
      </div>
    );
  }
}

export default LeftComponent;
```

```ts
import React from 'react';

interface IProps {
  /**
   * @description è‡ªå®šä¹‰æ ·å¼
   */
  style?: React.CSSProperties;
  children?: React.ReactNode;
  key?: string;
}

class RightComponent extends React.PureComponent<IProps> {
  render() {
    const { key = 'componentRight', style = {}, children } = this.props;
    return (
      <div key={key} className="right-box" style={style}>
        {children}
      </div>
    );
  }
}

export default RightComponent;
```

æˆ‘ä»¬çš„ç»„ä»¶ç¼–å†™å®Œæ¯•ï¼Œç”¨èµ·æ¥è¯•è¯•ï¼Œå‰å¾€ `renderer/container/templateList` ä¿®æ”¹ index.tsxï¼Œæˆ‘ä»¬å°†ä»£ç æ”¹å†™ä¸ºï¼š

```ts
// renderer/container/templateList/index.tsx

import React from 'react';
import './index.less';
import Header from './Header';
import Navigation from './Navigation';
import StaticResume from './StaticResume';
// ğŸ‘‡ å¼•å…¥
import MyRectSize from '@common/components/MyRectSize';

function TemplateList() {
  return (
    <div styleName="container">
      <Header />
      <div styleName="content">
        <MyRectSize>
          <MyRectSize.Left>
            <Navigation />
          </MyRectSize.Left>
          <MyRectSize.Right>
            <StaticResume />
          </MyRectSize.Right>
        </MyRectSize>
      </div>
    </div>
  );
}
export default TemplateList;
```

å¦‚æœä½ å‘ç°æ¥å…¥æ­¤ç»„ä»¶ä¹‹åæœ‰ä¸€äº›æ ·å¼ä¸Šçš„é—®é¢˜ï¼Œä½ éœ€è¦åšä¸€äº›ä¿®æ”¹ã€‚å…·ä½“è¯¦æƒ…å¯çœ‹è¿™é‡Œï¼š[commit](https://github.com/PDKSophia/visResumeMook/commit/8eddcaf6caa07a2e42f42391e54870673d87b9eb)

è‡³æ­¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ç®€å†æ¨¡ç‰ˆåˆ—è¡¨çš„å®ç°ä»¥åŠä¾§è¾¹æ çš„äº¤äº’æ•ˆæœã€‚

## æ€»ç»“

æœ¬ç« èŠ‚åŠŸèƒ½å®ç°å‡ºå‘ï¼Œé€šè¿‡åˆæ­¥å®Œæˆé™æ€æ•ˆæœï¼Œè®©å°ä¼™ä¼´ä»¬å¿«é€Ÿå®ç°æ­¤éœ€æ±‚åŠŸèƒ½ã€‚ç”±äºæ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨ import å¼•å…¥æ¨¡ç‰ˆå°é¢ï¼Œäºæ˜¯æ€è€ƒå°è£… hooks å®ç°è¯»å–æ¨¡ç‰ˆé™æ€æ–‡ä»¶å¤¹çš„æ–¹å¼è§£å†³ã€‚é€šè¿‡å¯¹äº¤äº’çš„æ‰“ç£¨æ€è€ƒï¼Œæœ€ç»ˆå®ç°ä¾§è¾¹æ çš„åŠ¨æ€äº¤äº’æ•ˆæœã€‚

**å¦‚æœæ‚¨åœ¨è¾¹é˜…è¯»è¾¹å®è·µæ—¶ï¼Œå‘ç°ä»£ç æŠ¥é”™æˆ–è€… TS æŠ¥é”™ï¼Œé‚£ä¹ˆå°ä¼™ä¼´ä»¬å¯ä»¥æ ¹æ®æŠ¥é”™ä¿¡æ¯ï¼Œå»çº¿ä¸Šçœ‹çœ‹ç›¸åº”çš„ä»£ç ã€‚**

æœ¬ç« èŠ‚çš„ä»£ç é‡ç›¸å¯¹è¾ƒå¤§ï¼Œå¦‚æœå¯¹æœ¬ç« èŠ‚å­˜åœ¨ç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ã€‚