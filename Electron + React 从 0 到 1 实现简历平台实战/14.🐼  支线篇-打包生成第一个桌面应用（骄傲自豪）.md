## å‰è¨€

è®¸å¤šå°ä¼™ä¼´ä»¬é€šè¿‡é˜…è¯» [ç¯å¢ƒç¯‡-åŠ¨æ‰‹æ­å»ºæˆ‘ä»¬çš„ç®€å†å¹³å°](https://juejin.cn/book/6950646725295996940/section/6961586491285831720)ç« èŠ‚ï¼Œå°† Electron + React æ­å»ºèµ·æ¥åï¼Œè¿˜æ²¡å¼€å§‹å†™å‡ è¡Œä»£ç ï¼Œå°±è¿«ä¸åŠå¾…æƒ³æ‰“åŒ…æˆæ¡Œé¢åº”ç”¨ï¼Œæ¯•ç«Ÿæå‡ºè‡ªå·±ç¬¬ä¸€ä¸ªæ¡Œé¢åº”ç”¨ï¼Œæ˜¯ä¸€ä»¶å¾ˆéª„å‚²è‡ªè±ªçš„äº‹æƒ…ï¼ï¼ï¼ä¸ºæ­¤ï¼Œæ­¤ç« èŠ‚å°†ä»¥ [chapter-11](https://github.com/PDKSophia/visResumeMook/tree/chapter-11/)åˆ†æ”¯ä¸ºä¸»ï¼Œæ–°å¢æ”¯çº¿ä»£ç  [chapter-14-app](https://github.com/PDKSophia/visResumeMook/tree/chapter-14-app)è¿›è¡Œç®€æ˜“ç‰ˆçš„æ‰“åŒ…æ„å»ºæˆæ¡Œé¢ç«¯åº”ç”¨ã€‚

> âš ï¸ è¯·æ³¨æ„æ­¤ç« èŠ‚ä¸ºæ”¯çº¿ä»»åŠ¡ï¼Œéä¸»çº¿ä»»åŠ¡ã€‚åªæ˜¯ä¸ºäº†å¿«é€Ÿåœ†å¤§å®¶ä¸€ä¸ªæ¡Œé¢åº”ç”¨æ¢¦æƒ³ã€‚åç»­çš„ç« èŠ‚ï¼Œä»ç„¶ä»¥ [chapter-11](https://github.com/PDKSophia/visResumeMook/tree/chapter-11/)åˆ†æ”¯è¿›è¡Œå¼€å‘ã€‚

å¼ºçƒˆåœ¨çœ‹ç« èŠ‚å†…å®¹çš„åŒæ—¶ï¼Œç»“åˆä»“åº“ä»£ç è¿›è¡Œå­¦ä¹ ã€‚ğŸ‘‰ æ­¤é¡¹ç›®ä»£ç åœ¨: [chapter-14-app](https://github.com/PDKSophia/visResumeMook/tree/chapter-14-app)

## electron å’Œ react çš„å…³ç³»

æˆ‘ä»¬éœ€è¦å…ˆææ¸…æ¥šä¸€ä¸‹ï¼Œelectron è·Ÿ react çš„å…³ç³»ã€‚

### æœ¬åœ°å¼€å‘

å½“æˆ‘ä»¬åœ¨æœ¬åœ°å¼€å‘æ—¶ï¼Œè¿è¡Œçš„è„šæœ¬å‘½ä»¤æ˜¯ï¼š

```js
npm run start:main // è¿è¡Œä¸»è¿›ç¨‹
npm run start:render // è¿è¡Œæ¸²æŸ“è¿›ç¨‹
```

react é€šè¿‡ `webpack-dev-server` èµ·äº†ä¸€ä¸ªæœ¬åœ°æœåŠ¡ï¼Œæˆ‘ä»¬é€šè¿‡ `http://127.0.0.1:7001` å°±èƒ½è®¿é—®æˆ‘ä»¬çš„ç«™ç‚¹ã€‚Electron æ˜¯é€šè¿‡ BrowserWindow åˆ›å»ºäº†ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œæ­¤çª—å£é€šè¿‡ loadURL åŠ è½½äº†æˆ‘ä»¬çš„åœ°å€ï¼ˆä½ å¯ä»¥ç†è§£æˆ webview å½¢å¼ï¼‰ï¼Œä»è€Œæ˜¾ç¤ºæˆ‘ä»¬çš„ç½‘é¡µã€‚

```js
// åˆ›å»ºæµè§ˆå™¨çª—å£
const mainWindow = new BrowserWindow({
  width: 1200,
  height: 800,
  webPreferences: {
    devTools: true,
    nodeIntegration: true,
  },
});

if (isDev()) {
  // å¼€å‘ç¯å¢ƒ
  mainWindow.loadURL(`http://127.0.0.1:7001`);
} else {
  // ç”Ÿäº§ç¯å¢ƒ
  mainWindow.loadURL(`file://${path.join(__dirname, '../dist/index.html')}`);
}
```

### æ‰“åŒ…æ„å»º

å½“æˆ‘ä»¬æœ¬åœ°å¼€å‘å®Œæˆä¹‹åï¼Œéœ€è¦æ‰“åŒ…ä¸Šçº¿ï¼Œéœ€è¦è·‘ä»€ä¹ˆå‘½ä»¤ï¼Ÿä¸è¦æƒ³å¤ªå¤æ‚ã€‚å®ƒä»¬ä¹Ÿæ˜¯åˆ†å¼€æ‰“åŒ…çš„

```js
npm run build:main // æ‰“åŒ…ä¸»è¿›ç¨‹ï¼ˆå¯¹ app/main/electron.tsè¿›è¡Œæ‰“åŒ… ï¼‰
npm run build:render // æ‰“åŒ…æ¸²æŸ“è¿›ç¨‹ï¼ˆä¹Ÿå°±æ˜¯å¯¹ React è¿›è¡Œæ‰“åŒ…ï¼‰
```

æ‰“åŒ…ä¹‹åï¼Œæˆ‘ä»¬ dist ç›®å½•å°±ä¼šå­˜åœ¨ç›¸åº”çš„èµ„æºæ–‡ä»¶ã€‚å¦‚ index.htmlã€electron.js ç­‰ã€‚

### å…³ç³»

æé—®ï¼šæŠ›å¼€ Electronï¼Œæˆ‘ä»¬å¸¸è§„çš„ React é¡¹ç›®ï¼Œåœ¨æ‰“åŒ…ä¹‹åï¼Œå¦‚ä½•è¿è¡Œï¼Ÿ

æˆ‘ä»¬æ˜¯é€šè¿‡ç‚¹å‡» dist ä¸‹çš„ index.html å°±èƒ½åœ¨æµè§ˆå™¨é¡µé¢ä¸­æ‰“å¼€çœ‹æ•ˆæœï¼ˆå¦‚æœä½ å‘ç°æ²¡æ•ˆæœï¼Œè¯·ç¡®ä¿æ˜¯ä»¥ç›¸å¯¹è·¯å¾„åŠ è½½èµ„æºæ–‡ä»¶ï¼‰ï¼›ä½†å¦‚æœç»“åˆäº† Electronï¼Œé‚£ä¹ˆæ­¤æ—¶ç‚¹å‡» dist ä¸‹çš„ index.htmlï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼Œä¸€èˆ¬éƒ½ä¼šå‡ºé”™çš„ã€‚

å¦‚ä½•ç†è§£ï¼ŸElectron å®ƒå†…ç½®äº† Chromium å’Œ Nodeï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œä½ èƒ½åœ¨ Chrome æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­è¾“å‡º `process` å—ï¼Ÿå¹¶ä¸èƒ½ï¼Œå®ƒä¼šæŠ¥é”™ã€‚

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4388a793e3b4e3089671f3cb3c98fc6~tplv-k3u1fbpfcp-watermark.image)

ä½†å¦‚æœä½ æ˜¯é€šè¿‡ Electron çš„ BrowserWindow åˆ›å»ºçš„æµè§ˆå™¨çª—å£ï¼Œå»æ‰“å° `process`ï¼Œå°±èƒ½æ˜¾ç¤ºå†…å®¹

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a07f1d7f604c4bb8a5926d5fcc8b0a80~tplv-k3u1fbpfcp-watermark.image)

è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Electron é¡¹ç›®ä¸­ dist ä¸‹çš„ index.html ä¸èƒ½ç›´æ¥åœ¨ Chrome æµè§ˆå™¨è¿è¡Œï¼Œå› ä¸ºä½ çš„ä»£ç ï¼Œå¯èƒ½ç”¨åˆ°äº† Electron APIã€Node APIï¼ŒChrome æµè§ˆå™¨æ— æ³•è¯†åˆ«è¿™æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚**åªæœ‰é€šè¿‡ Electron ç”Ÿæˆçš„æµè§ˆå™¨çª—å£ï¼ŒLoadURL åŠ è½½æ­¤é¡µé¢ï¼Œæ‰èƒ½æ­£å¸¸è¿è¡Œã€‚**

é€šè¿‡å‰é¢çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬ LoadURL çš„æ˜¯ dist ä¸‹çš„ index.html

```js
if (isDev()) {
  // å¼€å‘ç¯å¢ƒ
  mainWindow.loadURL(`http://127.0.0.1:7001`);
} else {
  // ç”Ÿäº§ç¯å¢ƒ
  mainWindow.loadURL(`file://${path.join(__dirname, '../dist/index.html')}`);
}
```

## æ‰“åŒ…æ„å»º

ä¸Šé¢äº†è§£äº† Electron å’Œ React çš„å…³ç³»ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹æ‰“åŒ…æ„å»ºï¼Œæ­¤æ¬¡é¡¹ç›®ä¸­ï¼Œå°†ä»¥ [electron-builder](https://www.electron.build/) è¿›è¡Œåº”ç”¨æ‰“åŒ…ã€‚è¯·è®°ä½ï¼Œæˆ‘ä»¬ä»¥ [chapter-11](https://github.com/PDKSophia/visResumeMook/tree/chapter-11/) åˆ†æ”¯ä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œå¦‚æœä½ æ˜¯åŸºäºå…¶ä»–åˆ†æ”¯ï¼Œè¯·ç¡®ä¿ webpack çš„é…ç½®æ˜¯æ­£ç¡®çš„ã€‚

### ç¬¬ä¸€æ­¥ï¼šæ‰“åŒ… Electron å’Œ React

åœ¨ webpack æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢ `webpack.main.prod.js`ï¼Œè¡¨ç¤ºä¸»è¿›ç¨‹åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„æ‰“åŒ…é…ç½®ã€‚

```js
// webpack/webpack.main.prod.js
const path = require('path');
const baseConfig = require('./webpack.base.js');
const webpackMerge = require('webpack-merge');

const prodConfig = {
  entry: path.resolve(__dirname, '../app/main/electron.ts'),
  target: 'electron-main',
  output: {
    filename: 'electron.js',
    path: path.resolve(__dirname, '../dist'),
  },
  devtool: 'inline-source-map',
  // ğŸ‘‡ è¿™é‡Œæ”¹æˆç”Ÿäº§ç¯å¢ƒ
  mode: 'production',
};

module.exports = webpackMerge.merge(baseConfig, prodConfig);
```

æ–°å¢ `webpack.render.prod.js`ï¼Œè¡¨ç¤ºæ¸²æŸ“è¿›ç¨‹åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„æ‰“åŒ…é…ç½®ã€‚

```js
const path = require('path');
const webpackMerge = require('webpack-merge');
const baseConfig = require('./webpack.base.js');
const HtmlWebpackPlugin = require('html-webpack-plugin');

const prodConfig = {
  // ğŸ‘‡ è¿™é‡Œæ”¹æˆç”Ÿäº§ç¯å¢ƒ
  mode: 'production',
  entry: {
    index: path.resolve(__dirname, '../app/renderer/app.tsx'),
  },
  output: {
    filename: '[name].[hash].js',
    path: path.resolve(__dirname, '../dist'),
  },
  target: 'electron-renderer',
  devtool: 'inline-source-map',
  devServer: {
    contentBase: path.join(__dirname, '../dist'),
    compress: true,
    host: '127.0.0.1', // webpack-dev-serverå¯åŠ¨æ—¶è¦æŒ‡å®šipï¼Œä¸èƒ½ç›´æ¥é€šè¿‡localhostå¯åŠ¨ï¼Œä¸æŒ‡å®šä¼šæŠ¥é”™
    port: 7001, // å¯åŠ¨ç«¯å£ä¸º 7001 çš„æœåŠ¡
    hot: true,
  },
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader', 'postcss-loader'],
      },
      {
        test: /\.less$/,
        exclude: /node_modules/,
        use: [
          'style-loader',
          {
            loader: 'css-loader',
            options: {
              modules: {
                localIdentName: '[name]__[local]__[hash:base64:5]',
              },
            },
          },
          'postcss-loader',
          'less-loader',
        ],
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: path.resolve(__dirname, '../app/renderer/index.html'),
      filename: path.resolve(__dirname, '../dist/index.html'),
      chunks: ['index'],
    }),
  ],
};

module.exports = webpackMerge.merge(baseConfig, prodConfig);
```

ç´§æ¥ç€ï¼Œæˆ‘ä»¬å‰å¾€ `package.json` ä¸­ï¼Œæ·»åŠ æ‰“åŒ…å‘½ä»¤

```json
"scripts": {
  // æœ¬åœ°å¼€å‘
  "start:main": "webpack --config ./webpack/webpack.main.dev.js && electron ./dist/electron.js",
  "start:render": "webpack-dev-server --config ./webpack/webpack.render.dev.js",
  // ğŸ‘‡ æ–°å¢çš„ç”Ÿäº§æ‰“åŒ…å‘½ä»¤
  "build:main": "webpack --config ./webpack/webpack.main.prod.js",
  "build:render": "webpack --config ./webpack/webpack.render.prod.js",
},
```

æˆ‘ä»¬å»æ‰§è¡Œä¸€ä¸‹ `npm run build:main` å’Œ `npm run build:render`

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9addefe1d2cb4ee6b11e87d649f7e645~tplv-k3u1fbpfcp-watermark.image)

çœ‹çœ‹æ‰“åŒ…ä¹‹åçš„ dist æ–‡ä»¶ï¼Œå‘ç°æ‰“åŒ…ä¹‹åçš„ electron.js ä¸è§äº†ã€‚

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9d152c2bcf14203a14bc26bd4b23c17~tplv-k3u1fbpfcp-watermark.image)

åŸå› åœ¨äºæˆ‘ä»¬ä½¿ç”¨äº† `clean-webpack-plugin` æ’ä»¶ï¼Œè¯¥æ’ä»¶åœ¨æ¯æ¬¡æ‰“åŒ…ä¹‹å‰ï¼Œéƒ½ä¼šå°† dist åˆ é™¤å†æ–°å¢ã€‚æ‰€ä»¥å…ˆæ‰“åŒ…çš„æ–‡ä»¶è·Ÿç€è¢«åˆ æ‰äº†ã€‚æˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹ `webpack.base.js`

```js
// webpack/webpack.base.js
const path = require('path');
// const { CleanWebpackPlugin } = require('clean-webpack-plugin');

module.exports = {
  // å…¶ä»–ä»£ç çœç•¥...
  // ğŸ‘‡ æ³¨é‡Šæ­¤æ’ä»¶
  // plugins: [new CleanWebpackPlugin()],
};
```

æˆ‘ä»¬åˆ é™¤ dist ç›®å½•ï¼Œå†æ¬¡æ‰“åŒ…è¯•è¯•

```
rm -rf dist
npm run build:main
npm run build:render
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4118b16dee9f46f1a2a6befa1d5bfa9a~tplv-k3u1fbpfcp-watermark.image)

è¿™æ¬¡æˆ‘ä»¬å°±å‘ç°ï¼Œdist ç›®å½•ä¸‹çš„å†…å®¹éƒ½æ˜¯æ­£ç¡®çš„äº†ã€‚ä¸ºæ­¤æˆ‘ä»¬ Electron å’Œ React å‡æ‰“åŒ…æˆåŠŸã€‚

### ç¬¬äºŒæ­¥ï¼šå®‰è£… electron-builder

æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬è¿›è¡Œå®‰è£…

```
npm install electron-builder --save-dev
```

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33a60ac35ff7405aa1147d07f688179d~tplv-k3u1fbpfcp-watermark.image)

### ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ æ‰“åŒ…å‘½ä»¤è¿›è¡Œæ‰“åŒ…

é€šè¿‡ electron-builder å®˜æ–¹æ–‡æ¡£çš„ [å¿«é€Ÿä¸Šæ‰‹](https://www.electron.build/#quick-setup-guide)ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåªéœ€è¦æ·»åŠ å¯¹åº”çš„ä¸€äº›é…ç½®å³å¯å®ç°æ‰“åŒ…ã€‚

é…ç½®å±æ€§å¾ˆå¤šï¼Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾ï¼Œå°ä¼™ä¼´ä»¬ä»¬å¯ä»¥è‡ªè¡Œå‰å¾€é˜…è¯»ä¸€ä¸‹ï½

æ ¹æ®æ•™ç¨‹ï¼Œæˆ‘ä»¬åœ¨ package.json æ·»åŠ  build å±æ€§

```json
{
  "build": {
    "appId": "visResumeMook.ElectronReact", // è‡ªå®šä¹‰ appId
    "productName": "VisResumeMook", // æ‰“åŒ…ä¹‹åçš„ç¨‹åºå
    "copyright": "Copyright Â© 2019 ${author}",
    "files": ["dist/**/*", "package.json", "node_modules/"]
  }
}
```

æ¥ç€æ·»åŠ è„šæœ¬å‘½ä»¤

```js
"scripts": {
  "pack": "electron-builder --dir",
  "dist": "electron-builder"
}
```

è¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥æ‰§è¡Œæ‰“åŒ…äº†ã€‚ä¸€ä¸ªå®Œæ•´çš„æ‰“åŒ…æ„å»ºå‘½ä»¤ä¸ºï¼š

```js
rm -rf dist
npm run build:main
npm run build:render

// å¦‚æœä½ çš„é™æ€èµ„æºæ²¡å‘ç”Ÿæ”¹å˜ï¼Œå¯ä»¥ç›´æ¥ packï¼Œä¸ç”¨å†é‡æ–°æ‰“åŒ…ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹
npm run pack
```

è¿è¡Œä¸€ä¸‹ï¼Œå‘ç°æŠ¥é”™äº†

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/378e37f1831f4c248a3a61993229c6b0~tplv-k3u1fbpfcp-watermark.image)

æˆ‘ä»¬å°† electron æ”¾åˆ° devDependencies ä¸­ï¼Œç„¶åé‡æ–° installï¼Œå†æ‰§è¡Œä¸€ä¸‹å‘½ä»¤

```
npm run pack
```

æ‰§è¡Œç»“æœè¿˜æ˜¯å‡ºé”™ï¼ŒåŸå› åœ¨äºæˆ‘ä»¬çš„åº”ç”¨å…¥å£æ–‡ä»¶å†™é”™äº†

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2513e45145d64e9fafef265a1b1fe4e2~tplv-k3u1fbpfcp-watermark.image)

æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹ package.json ä¸­çš„ main å±æ€§ï¼Œæœç„¶æœ‰é—®é¢˜ï¼Œè¿›è¡Œä¿®æ”¹

```json
{
  // ğŸ‘‡ ä¿®æ”¹æˆæ‰“åŒ…åçš„å…¥å£æ–‡ä»¶
  "main": "./dist/electron.js"
}
```

å†æ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼Œçœ‹çœ‹ä¼šä¸ä¼šæ‰“åŒ…æˆåŠŸ

```
npm run pack
```

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e0e62b706d6418581f1534389395b61~tplv-k3u1fbpfcp-watermark.image)

æ²¡é—®é¢˜ï¼Œæˆ‘ä»¬å†å» dist ä¸‹é¢çœ‹çœ‹

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b438d963a164bc18381ee7a0e29fbeb~tplv-k3u1fbpfcp-watermark.image)

æˆ‘ä»¬åŒå‡»æ‰“å¼€ï¼Œå‘ç°ç™½å±ï¼Œæ¥çœ‹çœ‹æŠ¥ä»€ä¹ˆé”™

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4a840de16454132b52087b03979d3be~tplv-k3u1fbpfcp-watermark.image)

åŠ è½½çš„ `dist/index.html` æœ‰é—®é¢˜ï¼Œé€šè¿‡æ§åˆ¶å°æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ª `file://` é“¾æ¥æœ‰è¯¯

```js
if (isDev()) {
  // å¼€å‘ç¯å¢ƒ
  mainWindow.loadURL(`http://127.0.0.1:7001`);
} else {
  // ç”Ÿäº§ç¯å¢ƒ
  mainWindow.loadURL(`file://${path.join(__dirname, '../dist/index.html')}`);
}
```

å¾ˆæ˜æ˜¾ï¼Œè¿™ä¸ª `__dirname` å¥½åƒä¸èµ·ä½œç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ webpack.definePlugin æ·»åŠ æ­¤å…¨å±€å˜é‡

ä¿®æ”¹ webpack.main.prod.jsï¼Œæˆ‘ä»¬ä¸ºå…¶æ·»åŠ æ­¤å…¨å±€å˜é‡

```js
// webpack/webpack.main.prod.js

plugins: [
  // ğŸ‘‡ æ·»åŠ è¿™ä¸ªï¼Œç”¨äºæ‰“åŒ…åçš„ä¸»è¿›ç¨‹ä¸­æ­£ç¡®è·å–__dirname
  new webpack.DefinePlugin({
    __dirname: '__dirname',
  }),
];
```

ç„¶åé‡æ–°æ‰“åŒ…ä¸€ä¸‹

```
rm -rf dist
npm run build:main
npm run build:render
npm run pack
```

é¡ºåˆ©æ‰“åŒ…ä¹‹åï¼Œè¿›å…¥ dist ï¼ŒåŒå‡»ç‚¹å‡»æˆ‘ä»¬çš„ç¨‹åºåŒ…ï¼Œè¿™æ—¶å€™å°±èƒ½æ­£å¸¸è¿è¡Œäº†

### ç¬¬ä¸‰æ­¥ï¼šç”Ÿæˆå¤šå¹³å°çš„å®‰è£…åŒ…

å½“æˆ‘ä»¬ä¸é…ç½®ä»»ä½•å¹³å°ç›¸å…³ä¿¡æ¯æ—¶ï¼Œå°†ä¼šæ ¹æ®ä½ å½“å‰çš„è®¾å¤‡ï¼Œæ‰“åŒ…æˆå¯¹åº”çš„å®‰è£…åŒ…ã€‚å¦‚æœä½ æƒ³äº†è§£é»˜è®¤è¡Œä¸º[å¯ç‚¹å‡»è¿™é‡Œ](https://www.electron.build/cli.html#target)ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¿›è¡Œ mac å’Œ win çš„é…ç½®ï¼Œé…ç½®å‚æ•°å¤ªå¤šï¼Œè¿™é‡Œå°±ç›´æ¥ä¸Šé…ç½®é¡¹äº†ï¼Œå¤§å®¶å¯ä»¥å»[å®˜ç½‘](https://www.electron.build/)äº†è§£ç›¸å…³é…ç½®

```json
"build": {
    "appId": "visResumeMook.ElectronReact",
    "productName": "VisResumeMook",
    "copyright": "Copyright Â© 2019 ${author}",
    "extends": null,
    "files": [
      "dist/**/*",
      "package.json",
      "node_modules/"
    ],
    // è¿™æ˜¯èµ„æºæ–‡ä»¶
    "directories": {
      "buildResources": "assets",
      "output": "distAssets" // è¿™æ˜¯æ‰“åŒ…ä¹‹åå®‰è£…åŒ…æ‰€åœ¨çš„æ–‡ä»¶å¤¹
    },
    "mac": {
      "target": [
        "dmg",
        "zip"
      ]
    },
    "dmg": {
      "contents": [
        {
          "x": 130,
          "y": 220
        },
        {
          "x": 410,
          "y": 220,
          "type": "link",
          "path": "/Applications"
        }
      ]
    },
    "win": {
      "target": [
        "nsis",
        "msi"
      ]
    }
  },
```

ä¹‹åæˆ‘ä»¬å†å»æ‰§è¡Œä¸€ä¸‹æ‰“åŒ…ã€‚

```
npm run dist
```

![ä¼ä¸šå¾®ä¿¡æˆªå›¾_5353b118-156c-45a0-b1a6-e79d39dad901.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f199edcff6574f7bbb0a8192fe0bcfa8~tplv-k3u1fbpfcp-watermark.image)

æˆ‘ä»¬è¿›å…¥åˆ° distAssets æ–‡ä»¶å¤¹ä¸‹ï¼Œç„¶åå°±ä¼šå‘ç° dmg å®‰è£…åŒ…ï¼Œè¿›è¡Œå®‰è£…å³å¯

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ba4e0d468c2434d9e61e7d227088f15~tplv-k3u1fbpfcp-watermark.image)

å®‰è£…å®Œåï¼Œæˆ‘ä»¬å°±èƒ½æ„‰å¿«çš„ä½¿ç”¨æ­¤ç¨‹åºå•¦ï½

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1681a09bdbcd42f383f4aae17bd52c6b~tplv-k3u1fbpfcp-watermark.image)

## é—®é¢˜ï¼Ÿ

æœ‰å°ä¼™ä¼´ä»¬å¯èƒ½ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ‰“åŒ…ä¹‹åå›¾ç‰‡æ€ä¹ˆæ²¡äº†ï¼Œä¸€äº›åŠŸèƒ½æ€ä¹ˆæ¶ˆå¤±äº†ï¼Ÿä¸è¦æ…Œï¼Œå› ä¸ºæœ¬ç« èŠ‚çŸ¥è¯†æ”¯çº¿ä»»åŠ¡ï¼Œåªæ˜¯è®©å°ä¼™ä¼´ä»¬ä½“éªŒä¸€ä¸‹æ„å»ºæˆå®‰è£…åŒ…çš„å¿«ä¹ï¼Œå®Œæ•´çš„æ„å»ºæ‰“åŒ…è¯·çœ‹æ­¤ç« èŠ‚ï¼š[æ‰“åŒ…ç¯‡-åº”ç”¨ç¨‹åºç”Ÿäº§ç¯å¢ƒæ„å»º](https://juejin.cn/book/6950646725295996940/section/6962941213401939998)ï¼Œçœ‹å®Œä¹‹åï¼Œä½ é‡åˆ°çš„æ‰“åŒ…é—®é¢˜éƒ½èƒ½è¿åˆƒè€Œè§£ï½

## æœ€å

æ­¤ç« èŠ‚ä»¥â€ç²—æš´â€œçš„æ–¹æ¡ˆå®ç°ï¼Œä»£ç æœªç»è¿‡ä¼˜åŒ–å’ŒæŠ½ç¦»ï¼ŒåŒæ—¶æ‰“åŒ…å‡ºæ¥çš„ç¨‹åºä½“ç§¯å¾ˆå¤§ï¼Œå¹¶æœªè¿›è¡Œä¼˜åŒ–ã€‚è¿™äº›æ“ä½œéƒ½åœ¨ä¸»çº¿ä»»åŠ¡çš„[æ‰“åŒ…ç¯‡-Electron æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–](https://juejin.cn/book/6950646725295996940/section/6962941003858706436)å»å®ç°ã€‚
